<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0102)redhanded.hobix.com/bits/matchingIntoMultipleAssignment.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<BASE href="http://redhanded.hobix.com.wstub.archive.org/bits/matchingIntoMultipleAssignment.html">--><BASE href=".">


<TITLE>RedHanded » ary / 3</TITLE>
<LINK rel="shortcut icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<LINK rel="icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<META http-equiv="Pragma" content="no-cache">
<META http-equiv="Expires" content="-1">




<STYLE type="text/css">
 @import "../site.css"; 
</STYLE>
</HEAD><BODY>

<DIV id="page">

<DIV id="hoodwinkd">
  <A href="http://hoodwinkd.hobix.com/"><SPAN>hoodwink.d enhanced</SPAN></A>

</DIV>
<DIV id="buttons">
<DL class="tab">
  <DT><A title="Syndicate this Site" href="index.xml">RSS</A></DT>
  <DD><A title="Syndicate this Site" href="index.xml">2.0</A></DD>
</DL>
<DL class="tab xhtml">
  <DT><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">XHTML</A></DT>
  <DD><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">1.0</A></DD>
</DL>
</DIV>
<H1 class="title"><A href="../"><IMG src="../images/redhanded.gif" alt="RedHanded"></A></H1>
<DIV id="banner">
  <DIV class="tagline">sneaking Ruby through the system</DIV>
  <DIV class="nav"><A href="../5.gets/">5.gets</A> | <A href="../bits/">bits</A> | 
    <A href="../inspect/">inspect</A> | <A href="../cult/">the cult</A> | <A href="../-h/">-h</A></DIV>
</DIV>


<DIV id="content">
<DIV id="sidebar">
<P>New to RedHanded? <A href="../-h/pardonAndWelcome.html">About our sections.</A></P>

<DIV class="sidebarBox">
<H2 class="sidebarTitle">Archive</H2>
<UL>

    <LI><A href="../2004/12/">December 2004</A></LI>

    <LI><A href="../2005/01/">January 2005</A></LI>

    <LI><A href="../2005/02/">February 2005</A></LI>

    <LI><A href="../2005/03/">March 2005</A></LI>

    <LI><A href="../2005/04/">April 2005</A></LI>

    <LI><A href="../2005/05/">May 2005</A></LI>

    <LI><A href="../2005/06/">June 2005</A></LI>

    <LI><A href="../2005/07/">July 2005</A></LI>

    <LI><A href="../2005/08/">August 2005</A></LI>

    <LI><A href="../2005/09/">September 2005</A></LI>

    <LI><A href="../2005/10/">October 2005</A></LI>

    <LI><A href="../2005/11/">November 2005</A></LI>

    <LI><A href="../2005/12/">December 2005</A></LI>

    <LI><A href="../2006/01/">January 2006</A></LI>

    <LI><A href="../2006/02/">February 2006</A></LI>

    <LI><A href="../2006/03/">March 2006</A></LI>

    <LI><A href="../2006/04/">April 2006</A></LI>

    <LI><A href="../2006/05/">May 2006</A></LI>

    <LI><A href="../2006/06/">June 2006</A></LI>

    <LI><A href="../2006/07/">July 2006</A></LI>

    <LI><A href="../2006/08/">August 2006</A></LI>

    <LI><A href="../2006/09/">September 2006</A></LI>

    <LI><A href="../2006/10/">October 2006</A></LI>

    <LI><A href="../2006/11/">November 2006</A></LI>

    <LI><A href="../2006/12/">December 2006</A></LI>

    <LI><A href="../2007/01/">January 2007</A></LI>

    <LI><A href="../2007/02/">February 2007</A></LI>

    <LI><A href="../2007/03/">March 2007</A></LI>

    <LI><A href="../2007/04/">April 2007</A></LI>

    <LI><A href="../2007/05/">May 2007</A></LI>

</UL>
</DIV>

<P><A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html"><IMG src="../images/prag-ruby-book.jpg" alt="PickAxe II"></A><BR>
<A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html">Get your copy of <I>Programming Ruby</I>!</A></P>

 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Links</H2>
        <A href="http://technorati.com/tags/ruby">@technorati</A><BR>
<A href="http://del.icio.us/tag/ruby">@del.icio.us</A><BR>
<A href="http://www.flickr.com/photos/tags/ruby">@flickr</A><BR>
<A href="http://www.artima.com/articles/index.jsp?topic=ruby">@artima</A><BR>
<A href="http://blog.caboo.se/">@caboo</A><BR>
<A href="http://www.oreillynet.com/ruby">@oreilly</A><BR>
<A href="http://ruby-lang.org/">ruby</A><BR>
<A href="http://ruby-doc.org/">-&gt; docs</A><BR>
<A href="http://rubyforge.org/">-&gt; wares</A><BR>
<A href="http://rubygarden.org/ruby/">-&gt; wiki</A><BR>
<A href="http://www.sitepoint.com/forums/forumdisplay.php?f=227">-&gt; forum</A><BR>
<A href="http://www.rubyquiz.com/">-&gt; quizzes</A><BR>
<A href="http://planetruby.0x42.net/">-&gt; planet</A><BR>
<A href="http://meme.b9.com/cdates.html?channel=ruby-lang">-&gt; irc</A><BR>
<A href="http://www.rubyweeklynews.org/">rubyweeklynews</A><BR>
<A href="http://weblog.rubyonrails.com/">rails</A><BR>
<A href="http://wiki.rubyonrails.org/">-&gt; wiki</A><BR>
<A href="http://www.planetrubyonrails.org/">-&gt; planet</A><BR>
<A href="http://thesaq.com/rubyonrails/">-&gt; irc</A><BR>
<A href="http://anarchaia.org/">%anarchaia</A><BR>
<A href="http://project.ioni.st/">%projectionist</A><BR>
<A href="http://pugs.blogs.com/">~audreyt</A><BR>
<A href="http://dablog.rubypal.com/">~black</A><BR>
<A href="http://www.jamesbritt.com/">~britt</A><BR>
<A href="http://www.jamisbuck.org/jamis/">~buck</A><BR>
<A href="http://tomcopeland.blogs.com/juniordeveloper/">~copeland</A><BR>
<A href="http://eigenclass.org/">~fernandez</A><BR>
<A href="http://www.chadfowler.com/">~fowler</A><BR>
<A href="http://www.loudthinking.com/">~hansson</A><BR>
<A href="http://blog.segment7.net/">~hodel</A><BR>
<A href="http://slash7.com/">~hoy/7</A><BR>
<A href="http://fhwang.net/">~hwang</A><BR>
<A href="http://blog.leetsoft.com/">~luetke</A><BR>
<A href="http://www.worldlingo.com/wl/translate?wl_lp=JA-en&wl_glossary=gl1&wl_fl=3&wl_rurl=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_url=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_g_table=-3">~matz</A><BR>
<A href="http://moonbase.rydia.net/">~mental</A><BR>
<A href="http://techno-weenie.net/">~olson</A><BR>
<A href="http://pragprog.com/pragdave">~pragdave</A><BR>
<A href="http://www.livejournal.com/users/premshree/">~premshree</A><BR>
<A href="http://kronavita.de/chris/blog/">~neukirchen</A><BR>
<A href="http://www.robbyonrails.com/">~robby</A><BR>
<A href="http://www.rousette.org.uk/">~rousette</A><BR>
<A href="http://nubyonrails.com/">~topfunky</A><BR>
<A href="http://www.jvoorhis.com/">~voorhis</A><BR>
<A href="http://onestepback.org/">~weirich</A><BR>
<A href="http://blog.zenspider.com/">~zenspider</A><BR>
        </DIV> 
 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Syndicate</H2>
        <UL>
            <LI><A href="../index.xml">RSS 2.0</A></LI>
        </UL>
        </DIV> 
 <DIV class="sidebarBox">
        <P>Built upon <A href="http://hobix.com/">Hobix</A></P>
        </DIV> 
<IMG src="../images/redhanded-duck.gif" alt="Type the Duck">
<DIV class="email">Got a story for us? <A href="../mailto:redhanded@hobix.com">E-mail it!</A></DIV>
<DIV class="technorati"><P><A href="http://www.technorati.com/profile/whytheluckystiff">Technorati Profile</A>
<A href="http://www.technorati.com/cosmos/search.html?url=http%3A%2F%2Fredhanded.hobix.com"><BR>
<IMG src="../images/bubble_icon.gif" height="20" width="24" alt="Get Conversations about RedHanded &raquo; sneaking Ruby through the system"></A>
</P>
</DIV>

</DIV>


 <DIV id="blog">
        
<DIV class="entry">
    <H2 class="entryTitle">ary / 3
  <SPAN class="entryPermalink"><A href="../bits/matchingIntoMultipleAssignment.html" title="Permanent link to &ldquo;ary / 3&rdquo;">#</A></SPAN>
</H2>

<DIV class="entrySection">by <A href="http://whytheluckystiff.net/" title="Visit why&#39;s homepage">why</A> 
  in <A href="../bits" title="List of entries in the &ldquo;bits&rdquo; category">bits</A>
</DIV>

     <DIV class="entryContent"><P>Sometimes I wish <CODE>Array.partition</CODE> could split into more than halves.   Something like <A href="http://facets.rubyforge.org/rdoc-nano/classes/Enumerable.html#M000432">partition_by</A> or <A href="http://facets.rubyforge.org/rdoc-nano/classes/Enumerable.html#M000451">commonality</A>. Like an <CODE>Array./</CODE> method!</P>


<PRE> class Array
   def / len
     inject([]) do |ary, x|
       ary &lt;&lt; [] if [*ary.last].nitems % len == 0
       ary.last &lt;&lt; x
       ary
     end
   end
 end

 &gt;&gt; products = %w[cycles vents hoops willies moogs rifles pools fawns tridents]
 &gt;&gt; products / 3
 =&gt; [["cycles", "vents", "hoops"], ["willies", "moogs", "rifles"], 
     ["pools", "fawns", "tridents"]]
 &gt;&gt; products / 2
 =&gt; [["cycles", "vents"], ["hoops", "willies"], 
     ["moogs", "rifles"], ["pools", "fawns"], ["tridents"]]
</PRE>

	<P>The other alternative being a <A href="../inspect/hopscotchingArraysWithFlipFlops.html">hopscotch with a flip-flop</A>.</P></DIV> 
</DIV>
<DIV class="entryFooter"> 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>13:51</NOBR>
    <NOSCRIPT></NOSCRIPT>
   | 
    26 comments
</DIV>
</DIV>
<DIV id="comments">


<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>mfp</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>14:24</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>This should be faster (didn’t try it):</P>


<PRE><CODE>
require 'enumerator'
class Array
  def /(len); enum_for(:each_slice,len).to_a end 
end
</CODE>
</PRE>

	<P>Actually it’s not <CODE>Array.partition</CODE> but <CODE>Enumerable#partition</CODE>, so you could define it there (given a better name).</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>yxhuvud</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>15:04</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><CODE>
class Array
  def / len
    each_index{|i| self[(i + 1)...(i + len)] = self[i+len]
    }
  end
end
</CODE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>scili</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>17:42</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Is this the same as  <A href="http://facets.rubyforge.org/rdoc-nano/classes/Enumerable.html#M000452">each_slice</A> ?</P>


	<P>Granted, the source isn’t quite as compact.</P>


<CODE>each_slice(step=nil, &amp;yld)</CODE>

Iterate through slices. If slicing step is not given, the the arity if the block is used.<PRE><CODE>  
  x = []
  [1,2,3,4].each_slice(2){ |a,b| x &lt;&lt; [a,b] }
  x  #=&gt; [ [1,2], [3,4] ]

  x = []
  [1,2,3,4,5,6].each_slice(3){ |a| x &lt;&lt; a }
  x  #=&gt; [ [1,2,3], [4,5,6] ]
</CODE>
</PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>17:53</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>yxhuvud:</STRONG> Super sly, but that method needs a bang.</P>


	<P><STRONG>scili:</STRONG> Ohhh, using the arity of the block is a wise idea!  Geez, Facets is an entire schoolhouse of fledgling RCRs.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Danno</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>21:00</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>each_slice is writen in a peculairly inefficient way, unless I’m mistaken, also… am I crazy or does the first example need to drop the parameter 2 to demonstrate the behavior when step isn’t supplied?</P>


My fixed(?) version:
<CODE><PRE>  def each_slice(step=nil, &amp;yld)
    cnt = step || yld.arity.abs
    n = length / cnt
    n += 1 if length % cnt &gt; 0
    n.times do |i|
      yld.call(*self.slice(i*cnt,cnt))
    end
    return cnt
  end

</PRE></CODE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Danno</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>21:03</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Uh, scratch that, not inefficient, just very unDRY.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>praetorian</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jan 2006</NOBR> at <NOBR>22:00</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>ruby nube, but wouldn’t </P>


	<PRE><CODE>class Array
  def / len
    inject([[]]) do |ary, x|
      ary &lt;&lt; [] if ary.last.size &gt;= self.size / len 
      ary.last &lt;&lt; x
      ary
    end
  end
end</CODE></PRE>


	<P>be more keeping with the idea of division?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>cowgod</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>02:00</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Aye, the functionality described in the post is useful, but it’s not what I’d expect from what looks like a division operator. I’d expect</P>


	<P><CODE>products / 2</CODE></P>


	<P>to return</P>


	<P><CODE>[["cycles", "vents", "hoops", "willies", "moogs"], ["rifles", "pools", "fawns", "tridents"]]</CODE></P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Danno</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>09:12</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Maybe it should be called slice_by then?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>choonkeat</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>10:56</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>whichever the algo, or name. just thought that it should be noted that its important to be keeping those nils around. e.g. size() instead of nitems()</P>


	<P>[1,2,nil,3,nil,nil,4,5,6] / 4
=&gt; [[1, 2, nil, 3], [nil, nil, 4, 5], [6]]
=&gt; [[1, 2, 3, 4], [5, 6]]</P>


	<PRE><CODE>/ 4</CODE></PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>choonkeat</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>11:00</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>oops. the examples was,</P>


<CODE>[1,2,nil,3,nil,nil,4,5,6] / 4
=&gt; [[1, 2, nil, 3], [nil, nil, 4, 5], [6]]
&lt;br&gt;&lt;br&gt;
[1,2,nil,3,nil,nil,4,5,6].compact / 4
=&gt; [[1, 2, 3, 4], [5, 6]]
</CODE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>11:13</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Okay, so maybe mine should use the modulo then.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jes5199</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>11:59</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>i wrote some related but different code to cut up Ranges in to partitions of a known size: I called it Range.%</P>


	<P>I think must have been half-asleep when I wrote the code, though, I looks sort of ugly:</P>


<CODE><PRE>class Range
  def %(q)
    q = 1 if q &lt;= 0
    a = []

    i = self.end

    if(i == self.begin)
      return([self])
    end

    while(i &gt; self.begin)
      lasti = i
      i -= q
    q = 1 if q.zero?
    a = []

    i = self.begin
    l = self.end
    l -= 1 if self.exclude_end?
    while(i &lt;= self.end)
      lasti = i
      i += q
  if(l &lt; i)
        if self.exclude_end?
          a.push(lasti...l)
        else
          a.push(lasti..l)
        end
      else
        a.push(lasti...i)
      end
    end
    return a
  end
end
</PRE></CODE>
<CODE><PRE>irb(main):008:0&gt; (1...100) % 10
=&gt; [90...100, 80..90, 70..80, 60..70,
50..60, 40..50, 30..40, 20..30, 10..20,
1..10]</PRE></CODE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jes5199</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>12:04</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Actually, Why, I would call your method % and have / divide your array into (n) parts of equal size</P>


<CODE>[1,2,3,4,5,6] / 2 =&gt; [[1,2,3], [4,5,6]]</CODE>

<CODE>[1,2,3,4,5,6] % 2 =&gt; [[1,2], [3,4], [5,6]]</CODE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jes5199</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>12:05</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>nevermind that last comment, you’re already agreeing with me.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>mfp</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>17:43</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent">.oO(Why are they all rewriting what enumerator already does and more efficiently at that)</DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>fansipans</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jan 2006</NOBR> at <NOBR>20:48</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><B>mfp</B>: mmmmhm! hallelujah!(sic)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>really really noobish</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>29 Jan 2006</NOBR> at <NOBR>03:02</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I’ve been lurking in the Ruby/Rails commuity for a while, but I haven’t seen many references to ‘Facets’. Why? Is seems a suprememly useful library, but no one mentions it.</P>


	<P>For example; I don’t find it pre-gemed (real noob here) on many sites that offer Ruby/Rails hosting.</P>


	<P>Will I run into trouble if I install then depend on Facets?</P>


	<P>Sorry for the distraction.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jakdak</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>29 Jan 2006</NOBR> at <NOBR>03:46</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>n00bi3 – u could either ask them to add it for u (possibly offer them a nice chocolate cake as a reward) – they are usually quite friendly</P>


	<P>or u could copy and paste the function(s) u need from the source code of the gem into ur project :-)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>ntk</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>29 Jan 2006</NOBR> at <NOBR>05:04</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>My two cents:
a = (1..10).to_a; maxsubarraysize = 3-1; result = []; while a.size &gt; 0; result &lt;&lt; a.slice!(0..maxsubarraysize); end</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>praetorian</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Jan 2006</NOBR> at <NOBR>03:08</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>”.oO(Why are they all rewriting what enumerator already does and more efficiently at that)”</P>


	<P><EM>shrug</EM></P>


	<P>Because we are ignorant.</P>


	<P>cheers,
prat</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Austin</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Jan 2006</NOBR> at <NOBR>14:45</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>noobish: You don’t see many references to Facets because Facets is … far too large for most people to want to use. There are sometimes other reasons, too.</P>


	<P>I personally wouldn’t use any library that depended on Facets, because I vehemently disagree with most of the “design” decisions made in making the library.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Ezra Zygmuntowicz</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Jan 2006</NOBR> at <NOBR>17:08</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent">What about something like this?
<PRE># ---------------------------------------------------------------------------
# collect_every(n [,fill=false[,offset=0]])                  =&gt; an array
# collect_every(n [,fill=false[,offset=0]]) {|item| block}   =&gt; an_array
# ---------------------------------------------------------------------------
# If a block is given, it invokes the block passing in an array of n elements.
# The last array passed may not contain n elements if size % 2 does not equal
# zero. If no block is given, it returns an array containing the collections.
#
# If the optional argument fill is set to true, the empty spaces will be
# filled with nils. The optional argument offset allows the collection to 
# start at that index in the array.
#
# a = (1..10).to_a
# a.collect_every(5)               #=&gt; [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]]
# a.collect_every(5) {|x| p x}     #=&gt; [1, 2, 3, 4, 5]
#                                      [6, 7, 8, 9, 10]
# b = (1..7).to_a
# b.collect_every(3)               #=&gt; [[1, 2, 3], [4, 5, 6], [7]]
# b.collect_every(3,true)          #=&gt; [[1, 2, 3], [4, 5, 6], [7,nil,nil]]
# b.collect_every(3,true,1)        #=&gt; [[2, 3, 4], [5, 6, 7]]

class Array
  def collect_every(n,fill=false,offset=0)

    if block_given?
      while offset &lt; size
        ret=[]

        if fill
          n.times do |x| 
            if offset+x &gt; size - 1: ret &lt;&lt; nil
            else ret &lt;&lt; self[offset+x] end
          end
        else
          n.times { |x| ret &lt;&lt; self[offset+x] unless offset+x &gt; size-1 }
        end

        offset += n
        yield ret
        ret = nil
      end

    else
      ret = []
      while offset &lt; size
        ret &lt;&lt; []

        if fill
          n.times do |x|
            if offset+x &gt; size - 1: ret.last &lt;&lt; nil
            else ret.last &lt;&lt; self[offset+x] end
          end
        else
          n.times { |x| ret.last &lt;&lt; self[offset+x] unless offset+x &gt; size-1 }
        end

        offset += n
      end
      return ret
    end

  end
end
</PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Really Really Noobish</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Jan 2006</NOBR> at <NOBR>17:33</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Thanks JakDak, I know how to use gems. :-). I’m more interested in Austins answer. What design decisions did they make that turn you off?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>ntk</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>31 Jan 2006</NOBR> at <NOBR>02:16</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Ezra, this is the all-in-one solution! Nice!</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>lundo</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>31 Jan 2006</NOBR> at <NOBR>14:35</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Why not “if offset+x &gt; size – 1  THEN  ret.last &lt;&lt; nil; else ret.last … end”? Would be a bit easier to read, imho!</P></DIV></DIV>
</DIV>


  <DIV class="entry">
    <P><SMALL>Comments are closed for this entry.</SMALL></P>
  



        </DIV> 

</DIV>



</DIV>





</DIV></BODY></HTML>