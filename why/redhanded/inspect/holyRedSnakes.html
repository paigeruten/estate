<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0088)redhanded.hobix.com/inspect/holyRedSnakes.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<BASE href="http://redhanded.hobix.com.wstub.archive.org/inspect/holyRedSnakes.html">--><BASE href=".">


<TITLE>RedHanded » Holy Red Snakes!</TITLE>
<LINK rel="shortcut icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<LINK rel="icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<META http-equiv="Pragma" content="no-cache">
<META http-equiv="Expires" content="-1">




<STYLE type="text/css">
 @import "../site.css"; 
</STYLE>
</HEAD><BODY>

<DIV id="page">

<DIV id="hoodwinkd">
  <A href="http://hoodwinkd.hobix.com/"><SPAN>hoodwink.d enhanced</SPAN></A>

</DIV>
<DIV id="buttons">
<DL class="tab">
  <DT><A title="Syndicate this Site" href="index.xml">RSS</A></DT>
  <DD><A title="Syndicate this Site" href="index.xml">2.0</A></DD>
</DL>
<DL class="tab xhtml">
  <DT><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">XHTML</A></DT>
  <DD><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">1.0</A></DD>
</DL>
</DIV>
<H1 class="title"><A href="../"><IMG src="../images/redhanded.gif" alt="RedHanded"></A></H1>
<DIV id="banner">
  <DIV class="tagline">sneaking Ruby through the system</DIV>
  <DIV class="nav"><A href="../5.gets/">5.gets</A> | <A href="../bits/">bits</A> | 
    <A href="../inspect/">inspect</A> | <A href="../cult/">the cult</A> | <A href="../-h/">-h</A></DIV>
</DIV>


<DIV id="content">
<DIV id="sidebar">
<P>New to RedHanded? <A href="../-h/pardonAndWelcome.html">About our sections.</A></P>

<DIV class="sidebarBox">
<H2 class="sidebarTitle">Archive</H2>
<UL>

    <LI><A href="../2004/12/">December 2004</A></LI>

    <LI><A href="../2005/01/">January 2005</A></LI>

    <LI><A href="../2005/02/">February 2005</A></LI>

    <LI><A href="../2005/03/">March 2005</A></LI>

    <LI><A href="../2005/04/">April 2005</A></LI>

    <LI><A href="../2005/05/">May 2005</A></LI>

    <LI><A href="../2005/06/">June 2005</A></LI>

    <LI><A href="../2005/07/">July 2005</A></LI>

    <LI><A href="../2005/08/">August 2005</A></LI>

    <LI><A href="../2005/09/">September 2005</A></LI>

    <LI><A href="../2005/10/">October 2005</A></LI>

    <LI><A href="../2005/11/">November 2005</A></LI>

    <LI><A href="../2005/12/">December 2005</A></LI>

    <LI><A href="../2006/01/">January 2006</A></LI>

    <LI><A href="../2006/02/">February 2006</A></LI>

    <LI><A href="../2006/03/">March 2006</A></LI>

    <LI><A href="../2006/04/">April 2006</A></LI>

    <LI><A href="../2006/05/">May 2006</A></LI>

    <LI><A href="../2006/06/">June 2006</A></LI>

    <LI><A href="../2006/07/">July 2006</A></LI>

    <LI><A href="../2006/08/">August 2006</A></LI>

    <LI><A href="../2006/09/">September 2006</A></LI>

    <LI><A href="../2006/10/">October 2006</A></LI>

    <LI><A href="../2006/11/">November 2006</A></LI>

    <LI><A href="../2006/12/">December 2006</A></LI>

    <LI><A href="../2007/01/">January 2007</A></LI>

    <LI><A href="../2007/02/">February 2007</A></LI>

    <LI><A href="../2007/03/">March 2007</A></LI>

    <LI><A href="../2007/04/">April 2007</A></LI>

    <LI><A href="../2007/05/">May 2007</A></LI>

</UL>
</DIV>

<P><A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html"><IMG src="../images/prag-ruby-book.jpg" alt="PickAxe II"></A><BR>
<A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html">Get your copy of <I>Programming Ruby</I>!</A></P>

 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Links</H2>
        <A href="http://technorati.com/tags/ruby">@technorati</A><BR>
<A href="http://del.icio.us/tag/ruby">@del.icio.us</A><BR>
<A href="http://www.flickr.com/photos/tags/ruby">@flickr</A><BR>
<A href="http://www.artima.com/articles/index.jsp?topic=ruby">@artima</A><BR>
<A href="http://blog.caboo.se/">@caboo</A><BR>
<A href="http://www.oreillynet.com/ruby">@oreilly</A><BR>
<A href="http://ruby-lang.org/">ruby</A><BR>
<A href="http://ruby-doc.org/">-&gt; docs</A><BR>
<A href="http://rubyforge.org/">-&gt; wares</A><BR>
<A href="http://rubygarden.org/ruby/">-&gt; wiki</A><BR>
<A href="http://www.sitepoint.com/forums/forumdisplay.php?f=227">-&gt; forum</A><BR>
<A href="http://www.rubyquiz.com/">-&gt; quizzes</A><BR>
<A href="http://planetruby.0x42.net/">-&gt; planet</A><BR>
<A href="http://meme.b9.com/cdates.html?channel=ruby-lang">-&gt; irc</A><BR>
<A href="http://www.rubyweeklynews.org/">rubyweeklynews</A><BR>
<A href="http://weblog.rubyonrails.com/">rails</A><BR>
<A href="http://wiki.rubyonrails.org/">-&gt; wiki</A><BR>
<A href="http://www.planetrubyonrails.org/">-&gt; planet</A><BR>
<A href="http://thesaq.com/rubyonrails/">-&gt; irc</A><BR>
<A href="http://anarchaia.org/">%anarchaia</A><BR>
<A href="http://project.ioni.st/">%projectionist</A><BR>
<A href="http://pugs.blogs.com/">~audreyt</A><BR>
<A href="http://dablog.rubypal.com/">~black</A><BR>
<A href="http://www.jamesbritt.com/">~britt</A><BR>
<A href="http://www.jamisbuck.org/jamis/">~buck</A><BR>
<A href="http://tomcopeland.blogs.com/juniordeveloper/">~copeland</A><BR>
<A href="http://eigenclass.org/">~fernandez</A><BR>
<A href="http://www.chadfowler.com/">~fowler</A><BR>
<A href="http://www.loudthinking.com/">~hansson</A><BR>
<A href="http://blog.segment7.net/">~hodel</A><BR>
<A href="http://slash7.com/">~hoy/7</A><BR>
<A href="http://fhwang.net/">~hwang</A><BR>
<A href="http://blog.leetsoft.com/">~luetke</A><BR>
<A href="http://www.worldlingo.com/wl/translate?wl_lp=JA-en&wl_glossary=gl1&wl_fl=3&wl_rurl=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_url=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_g_table=-3">~matz</A><BR>
<A href="http://moonbase.rydia.net/">~mental</A><BR>
<A href="http://techno-weenie.net/">~olson</A><BR>
<A href="http://pragprog.com/pragdave">~pragdave</A><BR>
<A href="http://www.livejournal.com/users/premshree/">~premshree</A><BR>
<A href="http://kronavita.de/chris/blog/">~neukirchen</A><BR>
<A href="http://www.robbyonrails.com/">~robby</A><BR>
<A href="http://www.rousette.org.uk/">~rousette</A><BR>
<A href="http://nubyonrails.com/">~topfunky</A><BR>
<A href="http://www.jvoorhis.com/">~voorhis</A><BR>
<A href="http://onestepback.org/">~weirich</A><BR>
<A href="http://blog.zenspider.com/">~zenspider</A><BR>
        </DIV> 
 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Syndicate</H2>
        <UL>
            <LI><A href="../index.xml">RSS 2.0</A></LI>
        </UL>
        </DIV> 
 <DIV class="sidebarBox">
        <P>Built upon <A href="http://hobix.com/">Hobix</A></P>
        </DIV> 
<IMG src="../images/redhanded-duck.gif" alt="Type the Duck">
<DIV class="email">Got a story for us? <A href="../mailto:redhanded@hobix.com">E-mail it!</A></DIV>
<DIV class="technorati"><P><A href="http://www.technorati.com/profile/whytheluckystiff">Technorati Profile</A>
<A href="http://www.technorati.com/cosmos/search.html?url=http%3A%2F%2Fredhanded.hobix.com"><BR>
<IMG src="../images/bubble_icon.gif" height="20" width="24" alt="Get Conversations about RedHanded &raquo; sneaking Ruby through the system"></A>
</P>
</DIV>

</DIV>


 <DIV id="blog">
        
<DIV class="entry">
    <H2 class="entryTitle">Holy Red Snakes!
  <SPAN class="entryPermalink"><A href="../inspect/holyRedSnakes.html" title="Permanent link to &ldquo;Holy Red Snakes!&rdquo;">#</A></SPAN>
</H2>

<DIV class="entrySection">by <A href="http://whytheluckystiff.net/" title="Visit why&#39;s homepage">why</A> 
  in <A href="../inspect" title="List of entries in the &ldquo;inspect&rdquo; category">inspect</A>
</DIV>

     <DIV class="entryContent"><P>Gabriele Renzi wrote in about Guido van Rossum’s <A href="http://www.python.org/peps/pep-0340.html">PEP #340 Anonymous Block Statements</A> proposal announced today:</P>


	<BLOCKQUOTE>
		<P>Think of PEPs as RCRs in python land.  Notice this has just been written and is probably going to change a whole lot, but the core idea is: adding blocks to python.</P>
	</BLOCKQUOTE>


	<BLOCKQUOTE>
		<P>Notice the great near-to-end phrase: <STRONG>Note: the syntactic extensions to yield make it use very similar to that in Ruby.  This is intentional.</STRONG></P>
	</BLOCKQUOTE>


	<P>I can’t seem to find practical examples, but it appears that the <CODE>block..as</CODE> is the influenced syntax here:</P>


<PRE> block with_file(filename) as f:
   for line in f:
     print process(line)
</PRE>

	<P>The above being the example of the non-looping case, much like we use <CODE>File.open</CODE> with a block that closes our file handles.  And you can use <CODE>yield</CODE> inside the <CODE>with_file</CODE> definition very much like you do in Ruby.</P>


	<P>About Ruby’s influence, Guido <A href="http://mail.python.org/pipermail/python-dev/2005-April/052960.html">says</A>:</P>


	<BLOCKQUOTE>
		<P>I think we’re on to something. And I’m not too proud to say that Ruby has led the way here to some extent (even if Python’s implementation would be fundamentally different, since it’s based on generators, which has some different possibilities and precludes some Ruby patterns.)</P>
	</BLOCKQUOTE>


	<P>Of course.  Ahem.  You’re all red.  All of you.</P></DIV> 
</DIV>
<DIV class="entryFooter"> 
    <NOBR>27 Apr 2005</NOBR> at <NOBR>14:50</NOBR>
    <NOSCRIPT></NOSCRIPT>
   | 
    11 comments
</DIV>
</DIV>
<DIV id="comments">


<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Phil</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Apr 2005</NOBR> at <NOBR>17:40</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><CITE>Note: the syntactic extensions to yield make it use very similar to that in Ruby. This is intentional.</CITE></P>
	<P>They finally got it.  The snakes finally figured out that anonymous blocks are what sets Ruby apart from Python and allows you to do all sorts of cool things in Ruby that can’t be done (as easily) in Python.
For years the snake people have been repeating the mantra that there’s nothing you can do in Ruby that can’t be done in Python.</P>
	<P>Well, we’ll still have the sky punchers.</P>
	<P>But how does this match with Guido’s intention to get rid of lambda’s in an upcoming version of Python?  Seems to be a bit of a contradiction.  Also, will python’s proposed anonymous blocks allow for more than one statement?  Stay tuned.  For now I don’t think we’ll lose any Rubyists to the Snake.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>lesbonics</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Apr 2005</NOBR> at <NOBR>20:56</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>And when will Ruby get Python’s list comprehensions? I think this is one of the biggest downsides of Ruby. I <B>dare</B> anyone to write the second line of the code shown in <A href="http://dealmeida.net/en/Programming/Python/cyrillic.html">this page</A> in Ruby as elegantly as the Python version.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>timsuth</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Apr 2005</NOBR> at <NOBR>22:46</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>lesbonics,</P>
<CODE>indexes = [[letters[i] for letters in buttons] for i in range(3)]</CODE>
	<P>As a non-Python programmer, I find the above to be almost unreadable, and much prefer the Ruby <CODE>map</CODE> style.</P>
	<P>If you’re still interested in list comprehensions for Ruby, someone wrote a short implementation of them once. See somewhere on ruby-talk.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>yerejm</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Apr 2005</NOBR> at <NOBR>22:48</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Sorry, <CODE>Array.new(3) {|i| buttons.collect {|button| button[i].chr}}</CODE> is the best I can do, but my powers are weak.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>yerejm</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Apr 2005</NOBR> at <NOBR>22:58</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>P.S If you want to match line length to the Python version, <CODE>[i].chr</CODE> can be replaced with the not as understandable <CODE>[i, 1]</CODE>. If you want.</P>
	<P>P.P.S If you want even less line length, <CODE>collect</CODE>’s alias, <CODE>map</CODE>, could be used.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>yerejm</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Apr 2005</NOBR> at <NOBR>23:09</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Sorry, I got ahead of myself with the P.S above. Matching line length requires <CODE>map</CODE>.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>bogbogbog</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Apr 2005</NOBR> at <NOBR>03:00</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent">lesbo, 
<PRE>indexes = [[letters[i] for letters in buttons] for i in range(3)]
indexes = (0..2).map{|i| buttons.map{|button| b[i].chr}}
</PRE>
	<P>The solution in Ruby can be read left-to-right, Python’s requires one to parse the whole expr. to find the indices used in the iteration. It is arguably easier to remember the indices than the expression being evaluated.</P>
	<P>There are some things one can express more easily with list comprehensions. The above is not one of them. Better luck next time, lesbo.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>gab</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Apr 2005</NOBR> at <NOBR>04:33</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I’d have found more interesting an example of a list comprehension using mapping and filtering. Not really harder to do in ruby (see map_filter on the wiki) but at least not builtin :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MrCode</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>09 May 2005</NOBR> at <NOBR>12:56</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Another option:</P>
<PRE><CODE>
buttons.map{|button| button[0..2].scan(/./)}.transpose
</CODE></PRE>
	<P>I love Ruby.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Andrew Dalke</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>11 May 2005</NOBR> at <NOBR>12:07</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Here are some more Python variants for that code.</P>
<PRE>&amp;gt;&amp;gt;&amp;gt; buttons = ["abc", "def", "ghi"]
&amp;gt;&amp;gt;&amp;gt; zip(*buttons)[:3]
[('a', 'd', 'g'), ('b', 'e', 'h'), ('c', 'f', 'i')]
&amp;gt;&amp;gt;&amp;gt; zip(*[s[:3] for s in buttons])
[('a', 'd', 'g'), ('b', 'e', 'h'), ('c', 'f', 'i')]
&amp;gt;&amp;gt;&amp;gt; 
&amp;gt;&amp;gt;&amp;gt; from itertools import islice, izip 
&amp;gt;&amp;gt;&amp;gt; list(islice(izip(*buttons), 3))
[('a', 'd', 'g'), ('b', 'e', 'h'), ('c', 'f', 'i')]
&amp;gt;&amp;gt;&amp;gt; 
</PRE>
	<P>The first works best for the original purpose.  The latter two are increasingly more memory efficient.  This isn’t a case where list comps shine.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Andrew Dalke</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>11 May 2005</NOBR> at <NOBR>12:09</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Sorry about the &gt; (or should I write &amp;gt;? or &amp;amp;gt;?) The preview button appears to use different escaping rules than the submit.</P></DIV></DIV>
</DIV>


  <DIV class="entry">
    <P><SMALL>Comments are closed for this entry.</SMALL></P>
  



        </DIV> 

</DIV>



</DIV>





</DIV></BODY></HTML>