<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0110)redhanded.hobix.com/inspect/theThrillingFreakyFreakySandboxHack.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<BASE href="http://redhanded.hobix.com.wstub.archive.org/inspect/theThrillingFreakyFreakySandboxHack.html">--><BASE href=".">


<TITLE>RedHanded » The Thrilling Freaky-Freaky Sandbox Hack!!</TITLE>
<LINK rel="shortcut icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<LINK rel="icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<META http-equiv="Pragma" content="no-cache">
<META http-equiv="Expires" content="-1">




<STYLE type="text/css">
 @import "../site.css"; 
</STYLE>
</HEAD><BODY>

<DIV id="page">

<DIV id="hoodwinkd">
  <A href="http://hoodwinkd.hobix.com/"><SPAN>hoodwink.d enhanced</SPAN></A>

</DIV>
<DIV id="buttons">
<DL class="tab">
  <DT><A title="Syndicate this Site" href="index.xml">RSS</A></DT>
  <DD><A title="Syndicate this Site" href="index.xml">2.0</A></DD>
</DL>
<DL class="tab xhtml">
  <DT><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">XHTML</A></DT>
  <DD><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">1.0</A></DD>
</DL>
</DIV>
<H1 class="title"><A href="../"><IMG src="../images/redhanded.gif" alt="RedHanded"></A></H1>
<DIV id="banner">
  <DIV class="tagline">sneaking Ruby through the system</DIV>
  <DIV class="nav"><A href="../5.gets/">5.gets</A> | <A href="../bits/">bits</A> | 
    <A href="../inspect/">inspect</A> | <A href="../cult/">the cult</A> | <A href="../-h/">-h</A></DIV>
</DIV>


<DIV id="content">
<DIV id="sidebar">
<P>New to RedHanded? <A href="../-h/pardonAndWelcome.html">About our sections.</A></P>

<DIV class="sidebarBox">
<H2 class="sidebarTitle">Archive</H2>
<UL>

    <LI><A href="../2004/12/">December 2004</A></LI>

    <LI><A href="../2005/01/">January 2005</A></LI>

    <LI><A href="../2005/02/">February 2005</A></LI>

    <LI><A href="../2005/03/">March 2005</A></LI>

    <LI><A href="../2005/04/">April 2005</A></LI>

    <LI><A href="../2005/05/">May 2005</A></LI>

    <LI><A href="../2005/06/">June 2005</A></LI>

    <LI><A href="../2005/07/">July 2005</A></LI>

    <LI><A href="../2005/08/">August 2005</A></LI>

    <LI><A href="../2005/09/">September 2005</A></LI>

    <LI><A href="../2005/10/">October 2005</A></LI>

    <LI><A href="../2005/11/">November 2005</A></LI>

    <LI><A href="../2005/12/">December 2005</A></LI>

    <LI><A href="../2006/01/">January 2006</A></LI>

    <LI><A href="../2006/02/">February 2006</A></LI>

    <LI><A href="../2006/03/">March 2006</A></LI>

    <LI><A href="../2006/04/">April 2006</A></LI>

    <LI><A href="../2006/05/">May 2006</A></LI>

    <LI><A href="../2006/06/">June 2006</A></LI>

    <LI><A href="../2006/07/">July 2006</A></LI>

    <LI><A href="../2006/08/">August 2006</A></LI>

    <LI><A href="../2006/09/">September 2006</A></LI>

    <LI><A href="../2006/10/">October 2006</A></LI>

    <LI><A href="../2006/11/">November 2006</A></LI>

    <LI><A href="../2006/12/">December 2006</A></LI>

    <LI><A href="../2007/01/">January 2007</A></LI>

    <LI><A href="../2007/02/">February 2007</A></LI>

    <LI><A href="../2007/03/">March 2007</A></LI>

    <LI><A href="../2007/04/">April 2007</A></LI>

    <LI><A href="../2007/05/">May 2007</A></LI>

</UL>
</DIV>

<P><A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html"><IMG src="../images/prag-ruby-book.jpg" alt="PickAxe II"></A><BR>
<A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html">Get your copy of <I>Programming Ruby</I>!</A></P>

 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Links</H2>
        <A href="http://technorati.com/tags/ruby">@technorati</A><BR>
<A href="http://del.icio.us/tag/ruby">@del.icio.us</A><BR>
<A href="http://www.flickr.com/photos/tags/ruby">@flickr</A><BR>
<A href="http://www.artima.com/articles/index.jsp?topic=ruby">@artima</A><BR>
<A href="http://blog.caboo.se/">@caboo</A><BR>
<A href="http://www.oreillynet.com/ruby">@oreilly</A><BR>
<A href="http://ruby-lang.org/">ruby</A><BR>
<A href="http://ruby-doc.org/">-&gt; docs</A><BR>
<A href="http://rubyforge.org/">-&gt; wares</A><BR>
<A href="http://rubygarden.org/ruby/">-&gt; wiki</A><BR>
<A href="http://www.sitepoint.com/forums/forumdisplay.php?f=227">-&gt; forum</A><BR>
<A href="http://www.rubyquiz.com/">-&gt; quizzes</A><BR>
<A href="http://planetruby.0x42.net/">-&gt; planet</A><BR>
<A href="http://meme.b9.com/cdates.html?channel=ruby-lang">-&gt; irc</A><BR>
<A href="http://www.rubyweeklynews.org/">rubyweeklynews</A><BR>
<A href="http://weblog.rubyonrails.com/">rails</A><BR>
<A href="http://wiki.rubyonrails.org/">-&gt; wiki</A><BR>
<A href="http://www.planetrubyonrails.org/">-&gt; planet</A><BR>
<A href="http://thesaq.com/rubyonrails/">-&gt; irc</A><BR>
<A href="http://anarchaia.org/">%anarchaia</A><BR>
<A href="http://project.ioni.st/">%projectionist</A><BR>
<A href="http://pugs.blogs.com/">~audreyt</A><BR>
<A href="http://dablog.rubypal.com/">~black</A><BR>
<A href="http://www.jamesbritt.com/">~britt</A><BR>
<A href="http://www.jamisbuck.org/jamis/">~buck</A><BR>
<A href="http://tomcopeland.blogs.com/juniordeveloper/">~copeland</A><BR>
<A href="http://eigenclass.org/">~fernandez</A><BR>
<A href="http://www.chadfowler.com/">~fowler</A><BR>
<A href="http://www.loudthinking.com/">~hansson</A><BR>
<A href="http://blog.segment7.net/">~hodel</A><BR>
<A href="http://slash7.com/">~hoy/7</A><BR>
<A href="http://fhwang.net/">~hwang</A><BR>
<A href="http://blog.leetsoft.com/">~luetke</A><BR>
<A href="http://www.worldlingo.com/wl/translate?wl_lp=JA-en&wl_glossary=gl1&wl_fl=3&wl_rurl=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_url=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_g_table=-3">~matz</A><BR>
<A href="http://moonbase.rydia.net/">~mental</A><BR>
<A href="http://techno-weenie.net/">~olson</A><BR>
<A href="http://pragprog.com/pragdave">~pragdave</A><BR>
<A href="http://www.livejournal.com/users/premshree/">~premshree</A><BR>
<A href="http://kronavita.de/chris/blog/">~neukirchen</A><BR>
<A href="http://www.robbyonrails.com/">~robby</A><BR>
<A href="http://www.rousette.org.uk/">~rousette</A><BR>
<A href="http://nubyonrails.com/">~topfunky</A><BR>
<A href="http://www.jvoorhis.com/">~voorhis</A><BR>
<A href="http://onestepback.org/">~weirich</A><BR>
<A href="http://blog.zenspider.com/">~zenspider</A><BR>
        </DIV> 
 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Syndicate</H2>
        <UL>
            <LI><A href="../index.xml">RSS 2.0</A></LI>
        </UL>
        </DIV> 
 <DIV class="sidebarBox">
        <P>Built upon <A href="http://hobix.com/">Hobix</A></P>
        </DIV> 
<IMG src="../images/redhanded-duck.gif" alt="Type the Duck">
<DIV class="email">Got a story for us? <A href="../mailto:redhanded@hobix.com">E-mail it!</A></DIV>
<DIV class="technorati"><P><A href="http://www.technorati.com/profile/whytheluckystiff">Technorati Profile</A>
<A href="http://www.technorati.com/cosmos/search.html?url=http%3A%2F%2Fredhanded.hobix.com"><BR>
<IMG src="../images/bubble_icon.gif" height="20" width="24" alt="Get Conversations about RedHanded &raquo; sneaking Ruby through the system"></A>
</P>
</DIV>

</DIV>


 <DIV id="blog">
        
<DIV class="entry">
    <H2 class="entryTitle">The Thrilling Freaky-Freaky Sandbox Hack!!
  <SPAN class="entryPermalink"><A href="../inspect/theThrillingFreakyFreakySandboxHack.html" title="Permanent link to &ldquo;The Thrilling Freaky-Freaky Sandbox Hack!!&rdquo;">#</A></SPAN>
</H2>

<DIV class="entrySection">by <A href="http://whytheluckystiff.net/" title="Visit why&#39;s homepage">why</A> 
  in <A href="../inspect" title="List of entries in the &ldquo;inspect&rdquo; category">inspect</A>
</DIV>

     <DIV class="entryContent"><P>Holy cats, I’m proud to offer you this sensational hack today.  For me, this is monumental, as it culminates a number of sundry microhacks from the past few years and gets us a step closer to realizing Try Ruby out in the broader kingdoms.  This is the sort of thing that will make you want to post spangly angel GIFs in the comments.</P>


	<P>Okay, requires a compiler.  Then: <CODE>gem install sandbox --source code.whytheluckystiff.net</CODE></P>


	<P>Now, to create a sandboxed Ruby interp.</P>


<PRE> &gt;&gt; require 'rubygems'
 &gt;&gt; require 'sandbox'

 &gt;&gt; s = Sandbox.new
 =&gt; #&lt;Sandbox:0x84dea60&gt;
 &gt;&gt; s.eval("2 + 6")
 =&gt; 8
 &gt;&gt; s.eval("'Jimmy'.reverse")
 =&gt; "ymmiJ" 
 &gt;&gt; s.eval('"Jimmy".length')
 =&gt; 5
</PRE>

	<P>Okay, so you can do all the Try Ruby examples.  And what about danger?</P>


<PRE> &gt;&gt; s.eval("Kernel.fork")
 (eval):1:in `method_missing': uninitialized constant NoMethodError::message (NameError)
</PRE>

	<P>Oh, check that out.  Not only is <CODE>Kernel.fork</CODE> not defined, but <CODE>NoMethodError</CODE> isn’t defined either!</P>


	<P>And yet, both are defined in the main interpreter outside the sandbox:</P>


<PRE> &gt;&gt; Kernel.method(:fork)
 =&gt; #&lt;Method: Kernel.fork&gt;
 &gt;&gt; NoMethodError
 =&gt; NoMethodError
</PRE>

	<P>There are some security holes still being worked out on Ruby-Core, I need a few variables exposed.  But, it’s looking really good.  Many thanks to MenTaLguY who helped conceive this idea <A href="../inspect/lessMethod_missingInMarkaby.html#comments">here in the comments</A>.</P>


	<P>So what are the implications?  Oh, come on!</P>


	<UL>
	<LI>Load multiple Rails apps, Camping apps, Nitro apps into the same interpreter without polluting each other’s namespaces.</LI>
		<LI>Allow Ruby code from users of your application without danger of affecting the app itself. (Scriptable wikis, markaby templates, ohhhh so many uses.)</LI>
		<LI>Load several different versions of libraries at once (for testing and compatibility issues.)</LI>
		<LI>Reloading an app within itself. (Fathom.)</LI>
		<LI>Snapshoting an environment for reuse at a later stage. (The <CODE>sandkit</CODE> struct stores the whole environment.)</LI>
	</UL>


	<P>Eval has just become the least evil.  <CODE>alias docile eval</CODE>!</P></DIV> 
</DIV>
<DIV class="entryFooter"> 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:02</NOBR>
    <NOSCRIPT></NOSCRIPT>
   | 
    49 comments
</DIV>
</DIV>
<DIV id="comments">


<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Simon W</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:16</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>How does it deal with infinite loops in untrusted code?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:26</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>It runs them infinitely. :)  But, sure, we can get into that shortly.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Arthur</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:29</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Well, they run… forever.
And block the execution =|</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Patrick</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:31</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>This would make a great tool in a bot on #ruby-lang, so you could:</P>


	<P>irb: [1,2,3].each { |n| n + 1 }</P>


	<P>and have it show the results on the spot. It would need to have a time limiter and an output limiter, but it would be very handy as a teaching tool.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>kevin</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:32</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Barfs on  OS X … haven’t really had time to look into it more but here’s what we get:</P>


<PRE>dyld: NSLinkModule() error
dyld: Symbol not found: _SPECIAL_SINGLETON
  Referenced from: /usr/local/lib/ruby/gems/1.8/gems/sandbox-0.0.11/lib/sand_table.bundle
  Expected in: flat namespace

Trace/BPT trap</PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Drew</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:35</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Ahhhh, I can see it now. A great ruby colosseum shall come to pass.  With ruby scripts battling ruby scripts to the death! And one ruby interpreter to rule them all!</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>LninYo</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:36</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>You The Man Now  DAWG !</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:38</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>kevin:</STRONG> Oh, goody.  Well, I’m not using that macro really anyway.  I just put out a new gem… try?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>FlashHater</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:44</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Greatness! We’ll be seeing this slapped into balloon shortly, right?<BR>
<STRONG>Patrick:</STRONG> We already have one in camping (?eval) and TryRuby in Second Life.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>acrylic</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:59</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><PRE>require "rubygems" 
require "sandbox" 
s = Sandbox.new
s.eval("blah")
</PRE>

<PRE>$ ruby test.rb 
(eval):1: [BUG] Bus Error
ruby 1.8.4 (2005-12-24) [powerpc-darwin8.6.0]

Abort trap
</PRE>

	<P>requiring files/undeclared variables all cause it to crash on my machine. Also, shouldn’t the value returned from Sandbox#eval be tainted?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>hgs</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>10:59</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P> IIRC , modruby exists so one doesn’t have many interpreters running on the server.  If all the cgis run in sandboxes…  Or is that silly?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>11:06</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>acrylic:</STRONG> It’s because I haven’t finished the exception handling.  And, in addition, the return value needs to be Marshalled (and tainted) for import into the master interp.</P>


	<P><STRONG>hgs:</STRONG> Sandboxes are pretty inexpensive.  About 16K for the base.  The reason mod_ruby doesn’t use multiple interpreters is because it can’t.  I’m not suggesting CGIs should each have a sandbox.  But each Rails app could have their own.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Danno</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>11:09</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Mah head asplode.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Patrick</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>11:13</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>FlashHater: is the code for that bot public anywhere? as an rbot plugin?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>FlashHater</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>11:16</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>Patrick:</STRONG> I don’t know. It’s not entirely hard, as TryRuby has a nice kinda-API. See <A href="../inspect/rubylessRuby.html/"> Rubyless Ruby</A> for more details.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>trans</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>11:19</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>So you basically took the whole Ruby environment and turned it into a reusable variable. Very cool. Kind of what I suggested in my last ruby-talk post about selector namespaces. Of course Austin bulked and said it would be the doom of Ruby. You’re just using it as a sandbox execution space at this point. Of course that’s all good. But what’s the status on our selector namespace apocalypse? ;)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Adam</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>11:34</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I am very much in awe.   JPG  stars and  GIF  angels for you!</P>


	<P>I have been toying with allowing people to write postprocessing scripts for big ugly data queries on a big ugly (well kinda pretty) website I’ve been building.  This is exacly what I needed to do it.</P>


	<P>Anyone have any tips for getting these fine things to compile on the darkside of win32?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Matt Todd</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>11:35</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I’m really excited about the prospects of this sandbox. Well done! The examples you give are really, very cool. I’m going to see if I can hack together the little  IRC IRB  bot. I’ll definitely play with the idea of the reloading app, too. Fun stuff!</P>


	<P>Thanks _why and all!</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>rick</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>12:08</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>_why: works on  OSX  now.  Sweet.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Justin</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>12:53</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Windows users need love on this one! I can’t compile the extension :(</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Lanfeust21</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>13:15</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>nothing to do with this but where can i find the markaby community to discuss the replacement of @content_for with yield?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Aredridel</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>13:31</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Most excellent work.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jm</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>13:33</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>holy freakin hell, I knew you’d come through with this eventually _why. I had faith and was rewarded!</P>


	<P>(I’ve wanted this for a rails  CMS  for some time)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>gmosx</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>13:41</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Wow, great timing, I was trying to think how to do something like this…</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>rosejn</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>13:54</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Sweet!  Now textile needs an accomplice  API .  Meta-textile with scriptability for meta-wiki linkability.  The problem is, sand boxes are way 80’s man.  These are more like, like pink dumpster gardens…</P>


	<P><A href="http://bldgblog.blogspot.com/2006/07/dumpster-gardens.html"><IMG src="../images/03_0006975.FPX" alt=""></A>
<A href="http://bldgblog.blogspot.com/2006/07/dumpster-gardens.html"><IMG src="../images/03_0005872.FPX" alt=""></A></P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>ben</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>15:07</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><IMG src="../images/AngelTwinkleRight.gif" alt=""> <IMG src="../images/AngelTwinkleLeft.gif" alt=""></P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Peter Cooper</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>15:35</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>This is very cool, especially for local use, but you can mimic this functionality using DRb and $SAFE, right? It’s remote and dependent on DRb, of course, but that’s just as safe, right? At least, that’s how ClassRoom works, but I haven’t done much security testing yet.. :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>ryan</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>15:38</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>what is fathom? do you have a link to it?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Peter Cooper</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>16:06</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Actually, nix my comment.  I’ve had a play and this kicks ass :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>The Wog</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>16:30</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>You freakin idiot! This will bring the whole country to it’s knees!!!!!!!!!!!</P>


	<P>Oops, sorry. Thought I was on the G dubbya Bush blog.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>FlashHater</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>17:10</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I propose a rename, to freakyfreakysandbox. I like the way it rolls off the toung. <BR>Back to the snadbox, I think alot of people have been suggesting this, but _why delivers! (On time, and with minimal damage to the package too!)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>17:28</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Well, now that you mention it, I kind of like snadbox.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>FlashHater</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>18:10</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I just came back here to check if I had misspelled sandbox, as I am so apt to do. Snadbox is one of those misspellings that would make a good name…</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>FlashHater</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>19:10</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent">Erk. It seems I have a bug to report. Whil looking through s.methods, I found “require”. Being the inquisitive person I am..<BR>
<CODE>irb(main):005:0&gt; s.require("open-uri")
/usr/lib/ruby/1.8/open-uri.rb:280: [BUG] Segmentation fault
ruby 1.8.4 (2005-12-24) [i686-linux]
</CODE>
And it segfaults. Emo.</DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>sporkmonger</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>20:55</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>_why deserves some kind of prize for this.</P>


	<P><IMG src="../images/seal.png" alt=""></P>


	<P>Yay!  Ambiguous eating utensil!</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Matt Todd</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>22:44</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Fathom is really just a word meaning: to understand. Of course, in this context, it has a bit of ‘hmph!’ to it and it really means “can you imagine how cool this will be?” Fathom. :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>19 Jul 2006</NOBR> at <NOBR>23:07</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>ben:</STRONG> I really appreciate that.  I need those holy gals right now.</P>


	<P>Okay, some segfaults are starting to disappear and I’ve got some tests that start up hundreds of sandboxes and benchmark.  Creating a Sandbox is a bit of a performance hit, so try to reuse them.  I mean on my laptop a Ruby process can make about a hundred sandboxes in a second, but can run tenthousand evals in a second.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>james</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>00:33</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>How does it know what is to be trusted or not? Can someone provide an explanation of why (pardon the pun) I can be sure that this won’t be invalidated down the line by some trivial means of injecting new untrusted code…? How are all the paths of entry being protected? Just curious, as i’ve no idea of the Ruby internals that needed to be tweaked for this hack.</P>


	<P>Thanks :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>FlashHater</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>00:49</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>james:</STRONG> From what I understand, _why’s basicaly shifting the context of the ruby interpreter when you eval in the sandbox. This way, since currently there is no way for a sandbox to see “up”, anything running outside of it is safe. Of course, this is all speculation on my part, as I haven’t the stomach to read C. (well, yes I do, but I have no idea how ruby really works…)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Freaky</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>04:57</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I approve of my name being attached to this as many times as seems appropriate.</P>


	<P>Isn’t  YARV  supposed to support multiple interpreters in a single process?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Bovi</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>07:50</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Is there a way to dump the Sandbox? marshal_dump isn’t defined in the Sanbox class at the moment.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>08:44</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>Bovi:</STRONG> There will be Sandbox#dup, Sandbox#_dump and Sandbox#_load.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>sporkmonger</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>09:07</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>This should make for an interesting alternative to Liquid: ERb in a Sandbox.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>blubber</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>09:10</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Can you do</P>


	<P>“Dir.entries(’..’).each {|f| File.delete f }”</P>


	<P>?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Albert</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>20 Jul 2006</NOBR> at <NOBR>10:25</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Alright! Now on to writing a mud in ObjectSpace</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>james</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>21 Jul 2006</NOBR> at <NOBR>07:59</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>FlashHater</STRONG>: Right, so the code running the Sandbox can’t be modified by the sandbox itself…</P>


	<P>But that still leaves the remaining problem of sandbox code being able to do things it shouldn’t…or is this something you’d just rely on $SAFE fixing?</P>


	<P>Anyway, liking the direction this is going, good stuff :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>AnalphaBestie</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>21 Jul 2006</NOBR> at <NOBR>08:26</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>hm, there is a eval bot in #ruby-lang. :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>21 Jul 2006</NOBR> at <NOBR>10:39</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Ohh, awesome sauce here why!  I leave town for a week and this is what you do!  Cool!</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Weirdbro</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>06 Aug 2006</NOBR> at <NOBR>09:57</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Dude, Drew, from way early in the comments, I had already thought of that a while ago, making a Ruby port of the old game droidbattles. But before sandbox, I had no idea how to keep them from just hacking other droids by modifying their classes. Yay for sandbox!</P></DIV></DIV>
</DIV>


<DIV class="entry">
<FORM name="userComment" method="post" action="/api/comment/inspect/theThrillingFreakyFreakySandboxHack">
  <DIV class="entryAttrib">
     <DIV class="entryAuthor"><INPUT name="sayor" type="textbox" size="15" maxlength="50"></DIV>
     <DIV id="liveTime" class="entryTime"><NOBR>11 Jul 2010</NOBR> at <NOBR>21:30</NOBR></DIV>
  </DIV>
  <DIV class="entryContentOuter"><DIV class="entryContent">
     <INPUT type="hidden" name="timestamp" value="yopYLare1A">
     <TEXTAREA name="consay" rows="6" cols="50"></TEXTAREA>
     <P><INPUT type="button" name="pleasePreview" value="preview" onclick="liveTextilePreview(document.forms[&#39;userComment&#39;].elements[&#39;consay&#39;], &#39;textilePreview&#39;, &#39;/api/preview&#39;)">
        <INPUT type="submit" name="submit" value="&gt;&gt;">
        <SMALL>* do <A href="../javascript:quickRedReference();">fancy stuff</A> in your comment.</SMALL>
     </P>
     <DIV id="textileWrap"><H4>PREVIEW PANE</H4>
     <DIV id="textilePreview"></DIV>
     </DIV>
     </DIV>
  </DIV></FORM></DIV>
  



        </DIV> 

</DIV>



</DIV>





</BODY></HTML>