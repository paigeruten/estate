<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0098)redhanded.hobix.com/inspect/theBestOfMethod_missing.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<BASE href="http://redhanded.hobix.com.wstub.archive.org/inspect/theBestOfMethod_missing.html">--><BASE href=".">


<TITLE>RedHanded » The Best of method_missing</TITLE>
<LINK rel="shortcut icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<LINK rel="icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<META http-equiv="Pragma" content="no-cache">
<META http-equiv="Expires" content="-1">




<STYLE type="text/css">
 @import "../site.css"; 
</STYLE>
</HEAD><BODY>

<DIV id="page">

<DIV id="hoodwinkd">
  <A href="http://hoodwinkd.hobix.com/"><SPAN>hoodwink.d enhanced</SPAN></A>

</DIV>
<DIV id="buttons">
<DL class="tab">
  <DT><A title="Syndicate this Site" href="index.xml">RSS</A></DT>
  <DD><A title="Syndicate this Site" href="index.xml">2.0</A></DD>
</DL>
<DL class="tab xhtml">
  <DT><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">XHTML</A></DT>
  <DD><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">1.0</A></DD>
</DL>
</DIV>
<H1 class="title"><A href="../"><IMG src="../images/redhanded.gif" alt="RedHanded"></A></H1>
<DIV id="banner">
  <DIV class="tagline">sneaking Ruby through the system</DIV>
  <DIV class="nav"><A href="../5.gets/">5.gets</A> | <A href="../bits/">bits</A> | 
    <A href="../inspect/">inspect</A> | <A href="../cult/">the cult</A> | <A href="../-h/">-h</A></DIV>
</DIV>


<DIV id="content">
<DIV id="sidebar">
<P>New to RedHanded? <A href="../-h/pardonAndWelcome.html">About our sections.</A></P>

<DIV class="sidebarBox">
<H2 class="sidebarTitle">Archive</H2>
<UL>

    <LI><A href="../2004/12/">December 2004</A></LI>

    <LI><A href="../2005/01/">January 2005</A></LI>

    <LI><A href="../2005/02/">February 2005</A></LI>

    <LI><A href="../2005/03/">March 2005</A></LI>

    <LI><A href="../2005/04/">April 2005</A></LI>

    <LI><A href="../2005/05/">May 2005</A></LI>

    <LI><A href="../2005/06/">June 2005</A></LI>

    <LI><A href="../2005/07/">July 2005</A></LI>

    <LI><A href="../2005/08/">August 2005</A></LI>

    <LI><A href="../2005/09/">September 2005</A></LI>

    <LI><A href="../2005/10/">October 2005</A></LI>

    <LI><A href="../2005/11/">November 2005</A></LI>

    <LI><A href="../2005/12/">December 2005</A></LI>

    <LI><A href="../2006/01/">January 2006</A></LI>

    <LI><A href="../2006/02/">February 2006</A></LI>

    <LI><A href="../2006/03/">March 2006</A></LI>

    <LI><A href="../2006/04/">April 2006</A></LI>

    <LI><A href="../2006/05/">May 2006</A></LI>

    <LI><A href="../2006/06/">June 2006</A></LI>

    <LI><A href="../2006/07/">July 2006</A></LI>

    <LI><A href="../2006/08/">August 2006</A></LI>

    <LI><A href="../2006/09/">September 2006</A></LI>

    <LI><A href="../2006/10/">October 2006</A></LI>

    <LI><A href="../2006/11/">November 2006</A></LI>

    <LI><A href="../2006/12/">December 2006</A></LI>

    <LI><A href="../2007/01/">January 2007</A></LI>

    <LI><A href="../2007/02/">February 2007</A></LI>

    <LI><A href="../2007/03/">March 2007</A></LI>

    <LI><A href="../2007/04/">April 2007</A></LI>

    <LI><A href="../2007/05/">May 2007</A></LI>

</UL>
</DIV>

<P><A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html"><IMG src="../images/prag-ruby-book.jpg" alt="PickAxe II"></A><BR>
<A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html">Get your copy of <I>Programming Ruby</I>!</A></P>

 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Links</H2>
        <A href="http://technorati.com/tags/ruby">@technorati</A><BR>
<A href="http://del.icio.us/tag/ruby">@del.icio.us</A><BR>
<A href="http://www.flickr.com/photos/tags/ruby">@flickr</A><BR>
<A href="http://www.artima.com/articles/index.jsp?topic=ruby">@artima</A><BR>
<A href="http://blog.caboo.se/">@caboo</A><BR>
<A href="http://www.oreillynet.com/ruby">@oreilly</A><BR>
<A href="http://ruby-lang.org/">ruby</A><BR>
<A href="http://ruby-doc.org/">-&gt; docs</A><BR>
<A href="http://rubyforge.org/">-&gt; wares</A><BR>
<A href="http://rubygarden.org/ruby/">-&gt; wiki</A><BR>
<A href="http://www.sitepoint.com/forums/forumdisplay.php?f=227">-&gt; forum</A><BR>
<A href="http://www.rubyquiz.com/">-&gt; quizzes</A><BR>
<A href="http://planetruby.0x42.net/">-&gt; planet</A><BR>
<A href="http://meme.b9.com/cdates.html?channel=ruby-lang">-&gt; irc</A><BR>
<A href="http://www.rubyweeklynews.org/">rubyweeklynews</A><BR>
<A href="http://weblog.rubyonrails.com/">rails</A><BR>
<A href="http://wiki.rubyonrails.org/">-&gt; wiki</A><BR>
<A href="http://www.planetrubyonrails.org/">-&gt; planet</A><BR>
<A href="http://thesaq.com/rubyonrails/">-&gt; irc</A><BR>
<A href="http://anarchaia.org/">%anarchaia</A><BR>
<A href="http://project.ioni.st/">%projectionist</A><BR>
<A href="http://pugs.blogs.com/">~audreyt</A><BR>
<A href="http://dablog.rubypal.com/">~black</A><BR>
<A href="http://www.jamesbritt.com/">~britt</A><BR>
<A href="http://www.jamisbuck.org/jamis/">~buck</A><BR>
<A href="http://tomcopeland.blogs.com/juniordeveloper/">~copeland</A><BR>
<A href="http://eigenclass.org/">~fernandez</A><BR>
<A href="http://www.chadfowler.com/">~fowler</A><BR>
<A href="http://www.loudthinking.com/">~hansson</A><BR>
<A href="http://blog.segment7.net/">~hodel</A><BR>
<A href="http://slash7.com/">~hoy/7</A><BR>
<A href="http://fhwang.net/">~hwang</A><BR>
<A href="http://blog.leetsoft.com/">~luetke</A><BR>
<A href="http://www.worldlingo.com/wl/translate?wl_lp=JA-en&wl_glossary=gl1&wl_fl=3&wl_rurl=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_url=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_g_table=-3">~matz</A><BR>
<A href="http://moonbase.rydia.net/">~mental</A><BR>
<A href="http://techno-weenie.net/">~olson</A><BR>
<A href="http://pragprog.com/pragdave">~pragdave</A><BR>
<A href="http://www.livejournal.com/users/premshree/">~premshree</A><BR>
<A href="http://kronavita.de/chris/blog/">~neukirchen</A><BR>
<A href="http://www.robbyonrails.com/">~robby</A><BR>
<A href="http://www.rousette.org.uk/">~rousette</A><BR>
<A href="http://nubyonrails.com/">~topfunky</A><BR>
<A href="http://www.jvoorhis.com/">~voorhis</A><BR>
<A href="http://onestepback.org/">~weirich</A><BR>
<A href="http://blog.zenspider.com/">~zenspider</A><BR>
        </DIV> 
 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Syndicate</H2>
        <UL>
            <LI><A href="../index.xml">RSS 2.0</A></LI>
        </UL>
        </DIV> 
 <DIV class="sidebarBox">
        <P>Built upon <A href="http://hobix.com/">Hobix</A></P>
        </DIV> 
<IMG src="../images/redhanded-duck.gif" alt="Type the Duck">
<DIV class="email">Got a story for us? <A href="../mailto:redhanded@hobix.com">E-mail it!</A></DIV>
<DIV class="technorati"><P><A href="http://www.technorati.com/profile/whytheluckystiff">Technorati Profile</A>
<A href="http://www.technorati.com/cosmos/search.html?url=http%3A%2F%2Fredhanded.hobix.com"><BR>
<IMG src="../images/bubble_icon.gif" height="20" width="24" alt="Get Conversations about RedHanded &raquo; sneaking Ruby through the system"></A>
</P>
</DIV>

</DIV>


 <DIV id="blog">
        
<DIV class="entry">
    <H2 class="entryTitle">The Best of method_missing
  <SPAN class="entryPermalink"><A href="../inspect/theBestOfMethod_missing.html" title="Permanent link to &ldquo;The Best of method_missing&rdquo;">#</A></SPAN>
</H2>

<DIV class="entrySection">by <A href="http://whytheluckystiff.net/" title="Visit why&#39;s homepage">why</A> 
  in <A href="../inspect" title="List of entries in the &ldquo;inspect&rdquo; category">inspect</A>
</DIV>

     <DIV class="entryContent"><P>I never use <CODE>method_missing</CODE>.  Maybe twice.  And both times I didn’t use it, regretted it, forcefully ejected the code from a moving vehicle, shed nary a tear.</P>


	<P>And yet, there’s so many great uses for <CODE>method_missing</CODE> out there.  If I may, a few of my favorite.  And if you will, please, a few of yours?</P>


	<UL>
	<LI><A href="http://www.ntecs.de/projects/xmlrpc4r/client.html#label-17">XMLRPC::Client::Proxy</A> will pass its method calls directly onto the service.  You can even specific a prefix, which makes the whole thing a little more psuedo-OO.<PRE>&gt;&gt; require 'xmlrpc/client'
&gt;&gt; system = XMLRPC::Client.
     new2( "http://www.oreillynet.com/meerkat/xml-rpc/server.php" ).
     proxy( "system" )
&gt;&gt; system.listMethods
=&gt; ["meerkat.getChannels", "meerkat.getCategories", ...]
</PRE>
Naturally, DRb <A href="http://www.eng.cse.dmu.ac.uk/~hgs/ruby/RUBY_SNAPSHOT_RDOC/classes/DRb/DRbObject.html#M003555">does similarly</A>.</LI>
		<LI><A href="http://builder.rubyforge.org/classes/Builder/XmlBase.html">Builder::XmlBase</A> translates method calls into <SPAN class="caps">XML</SPAN> tags.<PRE> &gt;&gt; require 'rubygems'
 &gt;&gt; require_gem 'builder'

 &gt;&gt; builder = Builder::XmlMarkup.new(:target=&gt;STDOUT, :indent=&gt;2)
 &gt;&gt; builder.person { |b| b.name("Jim"); b.phone("555-1234") }
 &lt;person&gt;
   &lt;name&gt;Jim&lt;/name&gt;
   &lt;phone&gt;555-1234&lt;/phone&gt;
 &lt;/person&gt;
</PRE></LI>
		<LI><A href="http://www.rubygarden.org/ruby?RubyIdioms">Hash with Attrs</A> (halfway down the page) is kind of neat.  Make your Hashes act like JavaScript objects.<PRE> class Hash
   def method_missing(meth,*args)
     if /=$/=~(meth=meth.id2name) then
       self[meth[0...-1]] = (args.length&lt;2 ? args[0] : args)
     else
       self[meth]
     end
   end
 end
</PRE></LI>
	</UL>


	<P>How do you use <CODE>method_missing</CODE>?  Blow our minds post-haste.</P></DIV> 
</DIV>
<DIV class="entryFooter"> 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>15:05</NOBR>
    <NOSCRIPT></NOSCRIPT>
   | 
    17 comments
</DIV>
</DIV>
<DIV id="comments">


<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>scott</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>16:34</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I use it in my Rails app, <A href="http://elitjournal.rubyforge.org/">Elite Journal</A> to generate  RSS  and Atom feeds for users:</P>


<PRE><CODE>
 def method_missing(method)
    @posts = User.find_first(['username = ?', method.to_s]).posts
    render_action 'index'    
    cache_page if ActionController::Base.perform_caching
  end
</CODE>
</PRE>

	<P>Such that /rss/scott gets the feed for user scott, and so on and so forth.  Not mind blowing really, but nice.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>scott</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>16:35</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>hmm, does pre/code not work in comments?  Sorry :(</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Richard Dale</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>16:41</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>The QtRuby/Korundum bindings for the Qt and  KDE  apis use method_missing to interface with the ‘Smoke’ library. There are over 1000 classes and 30000 methods accessible from ruby via method_missing and its friend const_missing.</P>
<P>method_missing is also used to divert method invocations to  KDE DCOP  calls – the  KDE  equivalent to Distributed Ruby DRb. When you invoke a method on a  KDE ::DCOPRef the Korundum runtime first looks for it in the Smoke runtime, and if it can’t be found, it catches an exception and tries to call a remote method via  DCOP . So here in 70 lines of ruby code we interface with both  DCOP  and Smoke with a nice combination of method_missing and exception handling. If you use method_missing you can transform method names, and so CamelCase or all lower case with underscores can be used. And a  DCOP  method call ‘setThing()’ can be invoked via ‘thing=’ in ruby:</P>

<PRE> def method_missing(*k)
     # Enables DCOPRef calls to be made like this:
     #
     # dcopRef = DCOPRef.new("dcopslot", "MyWidget")
     # result = dcopRef.getPoint("Hello from dcopcall")
     begin
         # First look for a method in the Smoke runtime.
         # If not found, then throw an exception and try dcop.
         super(*k)
     rescue
         dcopArgs = k[1, k.length-1]
         dcopArgs &lt;&lt;  NoEventLoop &lt;&lt; -1
         method = k[0].id2name
         # Make 'parrot.age = 7' a synonym for 'parrot.setAge(7)'
         method = 'set' + method[0,1].upcase + method[1,method.length].sub("=", "") if method =~ /.*[^-+%\/|]=$/

         # If the method name contains underscores, convert to camel case
         while method =~ /([^_]*)_(.)(.*)/ 
             method = $1 + $2.upcase + $3
         end

         # Get the functions() for this dcop ref and 
         # cache method_name =&gt; full_type_signature in a hash
         if @functions.nil?
             @functions = {}
             funcs = call("functions()")
             if funcs.nil?
                 return nil
             end
             funcs.each do |func|
                 if func =~ /^([\w,&lt;&gt;:]*)\s+(.*)(\(.*\))/
                     return_type = $1
                     name = $2
                     args = $3
                     if args =~ / /
                         # Remove any arg names
                         args.gsub!(/ \w*/, "")
                     end

                     # Make thing? a synonym for isThing() or hasThing()
                     if name =~ /^(is|has)(.)(.*)/
                         predicate = $2.downcase + $3 + '?'
                         if @functions[predicate].nil?
                             @functions[predicate] = return_type + " " + name + args
                         end
                     end

                     if @functions[name].nil?
                         @functions[name] = return_type + " " + name + args
                     else
                         # If a function name is overloaded, just keep a single name entry in
                         # the hash, not all the full type signatures. Then leave dcopTypeNames() 
                         # to try and resolve the ambiguous call from the ruby arg types passed.
                         @functions.delete(name)
                         @functions[name] = name
                     end
                 end
             end
         end

         method = @functions[method]
         if method.nil?
             qWarning( "DCOPRef: call #{k[0].id2name}() not found" )
             return
         end

         return callExt(method, *dcopArgs)
     end
 end
</PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>17:17</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Whoa, man.  I gotta get these code tags under  CONTROL !!  I may ditch the borders.  It’s too bad the scrollbars on  CSS  overflow is so poorly contrived.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>tim</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>17:37</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>In RMagick you can call any Image method on an ImageList object. In ImageList, method_missing routes the method on to the current image in the list. Following the <A href="http://www.rubygarden.org/ruby?RubyStyleGuide">RubyStyleGuide</A>
I also overrode respond_to? to give consistent results.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>francis</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>19:14</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><A href="http://lafcadio.rubyforge.org/">Lafcadio</A> uses method_missing to dynamically define getters and setters for domain objects. Also the main facade for the DB, ObjectStore, does lots of pseudo-English parsing to make sense of method calls like
<PRE>ObjectStore#get_user( 1 )
ObjectStore#get_users( 'fname', /francis/ )
ObjectStore#get_users { |user|
  user.fname.like( /francis/ )
}
</PRE>

	<P>I’d imagine ActiveRecord does the same.</P>


	<P>I was pretty impressed by Rich Kilmer’s Alph presentation at RubyConf 2004, which transparently dispatches ActionScript method calls from Ruby to a Flash movie over the network. Basically abstracting away the entire network, like it was some piddling implementation detail … sw33t.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Asenchi</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>19:22</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>the code tags are blinking at me, ... kind of freaking me out.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>flgr</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>03 Feb 2005</NOBR> at <NOBR>22:54</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I’m drunk, but RedHanded still rocks!</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Matt</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>04 Feb 2005</NOBR> at <NOBR>00:16</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Unit testing—I pass a class that records the methods called upon it (via method_missing) and assert that the right things are called in the right order.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>norseman</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>04 Feb 2005</NOBR> at <NOBR>08:37</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Is that what that is Asenchi? I thought _why was trying to send subliminal ruby messages to the brain…</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>flgr</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>04 Feb 2005</NOBR> at <NOBR>09:43</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I think the code blinking might be related to the refreshing time that is used at the comment posting form. Perhaps the timeout could be set closer to a minute?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>04 Feb 2005</NOBR> at <NOBR>09:58</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Hey, you don’t sound drunk.  You sound sensible and very rational.  In fact, I took your suggestion right away.  Soon as I saw it.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>william</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>04 Feb 2005</NOBR> at <NOBR>12:45</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>RubyTorrent uses <CODE>method_missing</CODE> to make all the bencoded fields in the .torrent file easy to access. (bencoding being the BitTorrent encoding scheme.)</P>


	<P>This is basically identical to the Javascript attributes thing above, but with some type-checking. For example:</P>


<CODE><PRE>class MetaInfoInfoFile
  def initialize(dict=nil)
    @s = TypedStruct.new do |s|
      s.field :length =&gt; Integer, :md5sum =&gt; String, :sha1 =&gt; String,
              :path =&gt; String
      s.array :path
      s.required :length, :path
    end
    #                                                                                # ...
  end

  def method_missing(meth, *args)
    @s.send(meth, *args)
  end
                                                                            ## ...
end
</PRE></CODE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>richard</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>04 Feb 2005</NOBR> at <NOBR>16:14</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I’m sorry my method_missing code went missing.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>joar054</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>05 Feb 2005</NOBR> at <NOBR>11:44</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>This is a rather cute idea I took from PickAxe 1. For example, Roman [10] returns “X” and Roman.CLIX returns 159(through method_missing).</P>


<PRE><CODE>
module Roman
    Sorted = [
        ["M", 1000], ["CM", 900], ["D", 500], ["CD", 400],
        ["C",  100], ["XC",  90], ["L",  50], ["XL",  40],
        ["X",   10], ["IX",   9], ["V",   5], ["IV",   4], ["I", 1] ]
    Values = Hash[*Sorted.flatten]
    Values.default = 0 # Needed to cope with bad input and boundary conditions.

    # Convert an integer to a Roman numeral.
    def self.[](dec)
        raise ArgumentError, dec.to_s if dec.class != Fixnum or dec &lt; 1
        Sorted.map { |str, num| str * (x, dec = dec.divmod num)[0] }.join
    end

    # Convert a Roman numeral to an integer.
    def self.method_missing(id)
        id = id.id2name
        dec = (0...id.length).inject(0) { |sum, ix|
            (n = Values[id[ix, 1]]) &lt; Values[id[ix+1, 1]] ? sum - n : sum + n
        }
        raise ArgumentError, "#{id}? #{dec}=#{self[dec]}" if id != self[dec]
        dec
    end
end
</CODE></PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Asenchi</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>05 Feb 2005</NOBR> at <NOBR>12:44</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>_why, maybe remove the sidebar when comments are shown in order to get rid of some of these scroll bars and have a larger space?</P>


	<P>Just an idea.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>daigo</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>10 Feb 2005</NOBR> at <NOBR>11:00</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Needle’s container.rb.</P></DIV></DIV>
</DIV>


  <DIV class="entry">
    <P><SMALL>Comments are closed for this entry.</SMALL></P>
  



        </DIV> 

</DIV>



</DIV>





</DIV></BODY></HTML>