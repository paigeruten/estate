<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0107)redhanded.hobix.com/inspect/theJavascriptRubyConnectionSlims.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<BASE href="http://redhanded.hobix.com.wstub.archive.org/inspect/theJavascriptRubyConnectionSlims.html">--><BASE href=".">


<TITLE>RedHanded » The Javascript-Ruby Connection Slims</TITLE>
<LINK rel="shortcut icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<LINK rel="icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<META http-equiv="Pragma" content="no-cache">
<META http-equiv="Expires" content="-1">




<STYLE type="text/css">
 @import "../site.css"; 
</STYLE>
</HEAD><BODY>

<DIV id="page">

<DIV id="hoodwinkd">
  <A href="http://hoodwinkd.hobix.com/"><SPAN>hoodwink.d enhanced</SPAN></A>

</DIV>
<DIV id="buttons">
<DL class="tab">
  <DT><A title="Syndicate this Site" href="index.xml">RSS</A></DT>
  <DD><A title="Syndicate this Site" href="index.xml">2.0</A></DD>
</DL>
<DL class="tab xhtml">
  <DT><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">XHTML</A></DT>
  <DD><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">1.0</A></DD>
</DL>
</DIV>
<H1 class="title"><A href="../"><IMG src="../images/redhanded.gif" alt="RedHanded"></A></H1>
<DIV id="banner">
  <DIV class="tagline">sneaking Ruby through the system</DIV>
  <DIV class="nav"><A href="../5.gets/">5.gets</A> | <A href="../bits/">bits</A> | 
    <A href="../inspect/">inspect</A> | <A href="../cult/">the cult</A> | <A href="../-h/">-h</A></DIV>
</DIV>


<DIV id="content">
<DIV id="sidebar">
<P>New to RedHanded? <A href="../-h/pardonAndWelcome.html">About our sections.</A></P>

<DIV class="sidebarBox">
<H2 class="sidebarTitle">Archive</H2>
<UL>

    <LI><A href="../2004/12/">December 2004</A></LI>

    <LI><A href="../2005/01/">January 2005</A></LI>

    <LI><A href="../2005/02/">February 2005</A></LI>

    <LI><A href="../2005/03/">March 2005</A></LI>

    <LI><A href="../2005/04/">April 2005</A></LI>

    <LI><A href="../2005/05/">May 2005</A></LI>

    <LI><A href="../2005/06/">June 2005</A></LI>

    <LI><A href="../2005/07/">July 2005</A></LI>

    <LI><A href="../2005/08/">August 2005</A></LI>

    <LI><A href="../2005/09/">September 2005</A></LI>

    <LI><A href="../2005/10/">October 2005</A></LI>

    <LI><A href="../2005/11/">November 2005</A></LI>

    <LI><A href="../2005/12/">December 2005</A></LI>

    <LI><A href="../2006/01/">January 2006</A></LI>

    <LI><A href="../2006/02/">February 2006</A></LI>

    <LI><A href="../2006/03/">March 2006</A></LI>

    <LI><A href="../2006/04/">April 2006</A></LI>

    <LI><A href="../2006/05/">May 2006</A></LI>

    <LI><A href="../2006/06/">June 2006</A></LI>

    <LI><A href="../2006/07/">July 2006</A></LI>

    <LI><A href="../2006/08/">August 2006</A></LI>

    <LI><A href="../2006/09/">September 2006</A></LI>

    <LI><A href="../2006/10/">October 2006</A></LI>

    <LI><A href="../2006/11/">November 2006</A></LI>

    <LI><A href="../2006/12/">December 2006</A></LI>

    <LI><A href="../2007/01/">January 2007</A></LI>

    <LI><A href="../2007/02/">February 2007</A></LI>

    <LI><A href="../2007/03/">March 2007</A></LI>

    <LI><A href="../2007/04/">April 2007</A></LI>

    <LI><A href="../2007/05/">May 2007</A></LI>

</UL>
</DIV>

<P><A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html"><IMG src="../images/prag-ruby-book.jpg" alt="PickAxe II"></A><BR>
<A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html">Get your copy of <I>Programming Ruby</I>!</A></P>

 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Links</H2>
        <A href="http://technorati.com/tags/ruby">@technorati</A><BR>
<A href="http://del.icio.us/tag/ruby">@del.icio.us</A><BR>
<A href="http://www.flickr.com/photos/tags/ruby">@flickr</A><BR>
<A href="http://www.artima.com/articles/index.jsp?topic=ruby">@artima</A><BR>
<A href="http://blog.caboo.se/">@caboo</A><BR>
<A href="http://www.oreillynet.com/ruby">@oreilly</A><BR>
<A href="http://ruby-lang.org/">ruby</A><BR>
<A href="http://ruby-doc.org/">-&gt; docs</A><BR>
<A href="http://rubyforge.org/">-&gt; wares</A><BR>
<A href="http://rubygarden.org/ruby/">-&gt; wiki</A><BR>
<A href="http://www.sitepoint.com/forums/forumdisplay.php?f=227">-&gt; forum</A><BR>
<A href="http://www.rubyquiz.com/">-&gt; quizzes</A><BR>
<A href="http://planetruby.0x42.net/">-&gt; planet</A><BR>
<A href="http://meme.b9.com/cdates.html?channel=ruby-lang">-&gt; irc</A><BR>
<A href="http://www.rubyweeklynews.org/">rubyweeklynews</A><BR>
<A href="http://weblog.rubyonrails.com/">rails</A><BR>
<A href="http://wiki.rubyonrails.org/">-&gt; wiki</A><BR>
<A href="http://www.planetrubyonrails.org/">-&gt; planet</A><BR>
<A href="http://thesaq.com/rubyonrails/">-&gt; irc</A><BR>
<A href="http://anarchaia.org/">%anarchaia</A><BR>
<A href="http://project.ioni.st/">%projectionist</A><BR>
<A href="http://pugs.blogs.com/">~audreyt</A><BR>
<A href="http://dablog.rubypal.com/">~black</A><BR>
<A href="http://www.jamesbritt.com/">~britt</A><BR>
<A href="http://www.jamisbuck.org/jamis/">~buck</A><BR>
<A href="http://tomcopeland.blogs.com/juniordeveloper/">~copeland</A><BR>
<A href="http://eigenclass.org/">~fernandez</A><BR>
<A href="http://www.chadfowler.com/">~fowler</A><BR>
<A href="http://www.loudthinking.com/">~hansson</A><BR>
<A href="http://blog.segment7.net/">~hodel</A><BR>
<A href="http://slash7.com/">~hoy/7</A><BR>
<A href="http://fhwang.net/">~hwang</A><BR>
<A href="http://blog.leetsoft.com/">~luetke</A><BR>
<A href="http://www.worldlingo.com/wl/translate?wl_lp=JA-en&wl_glossary=gl1&wl_fl=3&wl_rurl=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_url=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_g_table=-3">~matz</A><BR>
<A href="http://moonbase.rydia.net/">~mental</A><BR>
<A href="http://techno-weenie.net/">~olson</A><BR>
<A href="http://pragprog.com/pragdave">~pragdave</A><BR>
<A href="http://www.livejournal.com/users/premshree/">~premshree</A><BR>
<A href="http://kronavita.de/chris/blog/">~neukirchen</A><BR>
<A href="http://www.robbyonrails.com/">~robby</A><BR>
<A href="http://www.rousette.org.uk/">~rousette</A><BR>
<A href="http://nubyonrails.com/">~topfunky</A><BR>
<A href="http://www.jvoorhis.com/">~voorhis</A><BR>
<A href="http://onestepback.org/">~weirich</A><BR>
<A href="http://blog.zenspider.com/">~zenspider</A><BR>
        </DIV> 
 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Syndicate</H2>
        <UL>
            <LI><A href="../index.xml">RSS 2.0</A></LI>
        </UL>
        </DIV> 
 <DIV class="sidebarBox">
        <P>Built upon <A href="http://hobix.com/">Hobix</A></P>
        </DIV> 
<IMG src="../images/redhanded-duck.gif" alt="Type the Duck">
<DIV class="email">Got a story for us? <A href="../mailto:redhanded@hobix.com">E-mail it!</A></DIV>
<DIV class="technorati"><P><A href="http://www.technorati.com/profile/whytheluckystiff">Technorati Profile</A>
<A href="http://www.technorati.com/cosmos/search.html?url=http%3A%2F%2Fredhanded.hobix.com"><BR>
<IMG src="../images/bubble_icon.gif" height="20" width="24" alt="Get Conversations about RedHanded &raquo; sneaking Ruby through the system"></A>
</P>
</DIV>

</DIV>


 <DIV id="blog">
        
<DIV class="entry">
    <H2 class="entryTitle">The Javascript-Ruby Connection Slims
  <SPAN class="entryPermalink"><A href="../inspect/theJavascriptRubyConnectionSlims.html" title="Permanent link to &ldquo;The Javascript-Ruby Connection Slims&rdquo;">#</A></SPAN>
</H2>

<DIV class="entrySection">by <A href="http://whytheluckystiff.net/" title="Visit why&#39;s homepage">why</A> 
  in <A href="../inspect" title="List of entries in the &ldquo;inspect&rdquo; category">inspect</A>
</DIV>

     <DIV class="entryContent"><P>Yeah, Ruby and Javascript have a close proximity—<A href="http://whytheluckystiff.net/clog/ruby/rubyDotJs.html">flgr once gave us proof</A>.  MenTaL spotted a list of additions to Javascript arrays, which reeks of the Ruby Way.</P>


	<P>Of special note is the addition of <CODE>forEach</CODE>, but just look how valuable the Ruby equivalents of these methods have become to us:</P>


	<TABLE style="margin-left:200px;">
		<TBODY><TR>
			<TD> <SPAN class="caps">JS </SPAN></TD>
			<TD> Ruby </TD>
		</TR>
		<TR>
			<TD> <CODE>indexOf</CODE> </TD>
			<TD> <CODE>index</CODE> </TD>
		</TR>
		<TR>
			<TD> <CODE>lastIndexOf</CODE> </TD>
			<TD> <CODE>rindex</CODE> </TD>
		</TR>
		<TR>
			<TD> <CODE>some</CODE> </TD>
			<TD> <CODE>any?</CODE> </TD>
		</TR>
		<TR>
			<TD> <CODE>every</CODE> </TD>
			<TD> <CODE>all?</CODE> </TD>
		</TR>
		<TR>
			<TD> <CODE>filter</CODE> </TD>
			<TD> <CODE>find_all</CODE> </TD>
		</TR>
		<TR>
			<TD> <CODE>forEach</CODE> </TD>
			<TD> <CODE>each</CODE> </TD>
		</TR>
		<TR>
			<TD> <CODE>map</CODE> </TD>
			<TD> <CODE>map</CODE> </TD>
		</TR>
	</TBODY></TABLE>




	<P>Interesting.  I’m reading here and each of the iterators sends three parameters to the “block”.  The value, the current index and the array itself.</P>


<PRE> var aNumbers = [4, 2, 6, 9];
 var aTimesTwoNumbers = aNumbers.map(function (v, i, ary) {
   return v * 2;
 });
</PRE>

	<P>It’s that index value.  We’ve never known where to put it.  I believe in Javascript you can safely omit parameters you’re not using.  (via <A href="http://www.webreference.com/programming/javascript/ncz/column4/">webref</A>.)</P></DIV> 
</DIV>
<DIV class="entryFooter"> 
    <NOBR>29 Aug 2005</NOBR> at <NOBR>23:23</NOBR>
    <NOSCRIPT></NOSCRIPT>
   | 
    7 comments
</DIV>
</DIV>
<DIV id="comments">


<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>flgr</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>29 Aug 2005</NOBR> at <NOBR>23:45</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Same for Ruby.JS. It always yields the index (which is the key for hashes) as well.</P>


	<P>Expect more Ruby-like constructs to appear in JavaScript soon. Good stuff will happen.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>eule</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Aug 2005</NOBR> at <NOBR>00:40</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>When are we finally going to translate Ruby into JS, making  AJAX  a seamless experience ?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>mdaines</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Aug 2005</NOBR> at <NOBR>10:02</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I was working on a Rails app with a lot of JavaScript at the front, and ran into this.</P>


	<P>Neither FireFox or Safari seem to support these, (though I thought Firefox did? perhaps I’m mistaken.) and to put your own versions on the prototype of “Array” yourself is convenient but also doesn’t work for some cases. If you write something like this…</P>


<PRE><CODE>
document.getElementsByTagName('a').forEach(function(v, i, ary) {
  // maybe assign onclick handlers or something, and only for specific classes
});
</CODE>
</PRE>

	<P>...it doesn’t work, because getElementsByTagName and the like don’t return an actual array, just an array-like object. (A <A href="http://webkit.opendarwin.org/blog/?p=13">live query</A>, actually.) To fix that, I made a function called toArray and put it in Array. So now I do this:</P>


<PRE><CODE>
Array.toArray(document.getElementsByTagName('a')).forEach(function(v) {
  // maybe assign onclick handlers or something, and only for specific classes
});
</CODE>
</PRE>

	<P>I don’t know how harmful/not harmful all this is, but it works…</P>


	<P>Also: I actually wrote “each” instead of “forEach” initially, and am making it forEach in my code even though I don’t like it because it’s less like Ruby. And in a way I feel a strange sense of pride writing “map(function(v) {” and then the “});” at the end. I guess “});” is a man with a big moustache winking at you or something.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>mdaines</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Aug 2005</NOBR> at <NOBR>10:32</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>aha. having read the linked post, I see this is explained already! and toArray in Array is probably a bad idea.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>fredrik</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Aug 2005</NOBR> at <NOBR>12:03</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Putting a forEach method in the Nodelist prototype sounds like a much better idea. The same can be done for other methods from the Array object.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Ian Bicking</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Aug 2005</NOBR> at <NOBR>12:31</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><A href="http://mochikit.com/">Mochikit</A> introduces <A href="http://mochikit.com/doc/html/MochiKit/Base.html#adapter-registries">adapters</A> and <A href="http://mochikit.com/doc/html/MochiKit/Iter.html">iterators</A> to handle the issue of Array-like objects (that aren’t actually Arrays).  The result is kind of Lispish, kind of Pythonish.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>flgr</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Aug 2005</NOBR> at <NOBR>15:05</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>eule: Autrijus (the Pugs guy) was working on that last time I saw him.</P></DIV></DIV>
</DIV>


  <DIV class="entry">
    <P><SMALL>Comments are closed for this entry.</SMALL></P>
  



        </DIV> 

</DIV>



</DIV>





</DIV></BODY></HTML>