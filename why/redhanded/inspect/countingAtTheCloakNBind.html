<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0098)redhanded.hobix.com/inspect/countingAtTheCloakNBind.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<BASE href="http://redhanded.hobix.com.wstub.archive.org/inspect/countingAtTheCloakNBind.html">--><BASE href=".">


<TITLE>RedHanded » Counting At The Cloak 'N' Bind</TITLE>
<LINK rel="shortcut icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<LINK rel="icon" href="../favicon.ico" type="image/vnd.microsoft.icon" />
<META http-equiv="Pragma" content="no-cache">
<META http-equiv="Expires" content="-1">




<STYLE type="text/css">
 @import "../site.css"; 
</STYLE>
</HEAD><BODY>

<DIV id="page">

<DIV id="hoodwinkd">
  <A href="http://hoodwinkd.hobix.com/"><SPAN>hoodwink.d enhanced</SPAN></A>

</DIV>
<DIV id="buttons">
<DL class="tab">
  <DT><A title="Syndicate this Site" href="index.xml">RSS</A></DT>
  <DD><A title="Syndicate this Site" href="index.xml">2.0</A></DD>
</DL>
<DL class="tab xhtml">
  <DT><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">XHTML</A></DT>
  <DD><A title="Validate this Site" href="http://validator.w3.org/check?uri=http://redhanded.hobix.com/">1.0</A></DD>
</DL>
</DIV>
<H1 class="title"><A href="../"><IMG src="../images/redhanded.gif" alt="RedHanded"></A></H1>
<DIV id="banner">
  <DIV class="tagline">sneaking Ruby through the system</DIV>
  <DIV class="nav"><A href="../5.gets/">5.gets</A> | <A href="../bits/">bits</A> | 
    <A href="../inspect/">inspect</A> | <A href="../cult/">the cult</A> | <A href="../-h/">-h</A></DIV>
</DIV>


<DIV id="content">
<DIV id="sidebar">
<P>New to RedHanded? <A href="../-h/pardonAndWelcome.html">About our sections.</A></P>

<DIV class="sidebarBox">
<H2 class="sidebarTitle">Archive</H2>
<UL>

    <LI><A href="../2004/12/">December 2004</A></LI>

    <LI><A href="../2005/01/">January 2005</A></LI>

    <LI><A href="../2005/02/">February 2005</A></LI>

    <LI><A href="../2005/03/">March 2005</A></LI>

    <LI><A href="../2005/04/">April 2005</A></LI>

    <LI><A href="../2005/05/">May 2005</A></LI>

    <LI><A href="../2005/06/">June 2005</A></LI>

    <LI><A href="../2005/07/">July 2005</A></LI>

    <LI><A href="../2005/08/">August 2005</A></LI>

    <LI><A href="../2005/09/">September 2005</A></LI>

    <LI><A href="../2005/10/">October 2005</A></LI>

    <LI><A href="../2005/11/">November 2005</A></LI>

    <LI><A href="../2005/12/">December 2005</A></LI>

    <LI><A href="../2006/01/">January 2006</A></LI>

    <LI><A href="../2006/02/">February 2006</A></LI>

    <LI><A href="../2006/03/">March 2006</A></LI>

    <LI><A href="../2006/04/">April 2006</A></LI>

    <LI><A href="../2006/05/">May 2006</A></LI>

    <LI><A href="../2006/06/">June 2006</A></LI>

    <LI><A href="../2006/07/">July 2006</A></LI>

    <LI><A href="../2006/08/">August 2006</A></LI>

    <LI><A href="../2006/09/">September 2006</A></LI>

    <LI><A href="../2006/10/">October 2006</A></LI>

    <LI><A href="../2006/11/">November 2006</A></LI>

    <LI><A href="../2006/12/">December 2006</A></LI>

    <LI><A href="../2007/01/">January 2007</A></LI>

    <LI><A href="../2007/02/">February 2007</A></LI>

    <LI><A href="../2007/03/">March 2007</A></LI>

    <LI><A href="../2007/04/">April 2007</A></LI>

    <LI><A href="../2007/05/">May 2007</A></LI>

</UL>
</DIV>

<P><A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html"><IMG src="../images/prag-ruby-book.jpg" alt="PickAxe II"></A><BR>
<A href="http://www.pragmaticprogrammer.com/titles/ruby/index.html">Get your copy of <I>Programming Ruby</I>!</A></P>

 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Links</H2>
        <A href="http://technorati.com/tags/ruby">@technorati</A><BR>
<A href="http://del.icio.us/tag/ruby">@del.icio.us</A><BR>
<A href="http://www.flickr.com/photos/tags/ruby">@flickr</A><BR>
<A href="http://www.artima.com/articles/index.jsp?topic=ruby">@artima</A><BR>
<A href="http://blog.caboo.se/">@caboo</A><BR>
<A href="http://www.oreillynet.com/ruby">@oreilly</A><BR>
<A href="http://ruby-lang.org/">ruby</A><BR>
<A href="http://ruby-doc.org/">-&gt; docs</A><BR>
<A href="http://rubyforge.org/">-&gt; wares</A><BR>
<A href="http://rubygarden.org/ruby/">-&gt; wiki</A><BR>
<A href="http://www.sitepoint.com/forums/forumdisplay.php?f=227">-&gt; forum</A><BR>
<A href="http://www.rubyquiz.com/">-&gt; quizzes</A><BR>
<A href="http://planetruby.0x42.net/">-&gt; planet</A><BR>
<A href="http://meme.b9.com/cdates.html?channel=ruby-lang">-&gt; irc</A><BR>
<A href="http://www.rubyweeklynews.org/">rubyweeklynews</A><BR>
<A href="http://weblog.rubyonrails.com/">rails</A><BR>
<A href="http://wiki.rubyonrails.org/">-&gt; wiki</A><BR>
<A href="http://www.planetrubyonrails.org/">-&gt; planet</A><BR>
<A href="http://thesaq.com/rubyonrails/">-&gt; irc</A><BR>
<A href="http://anarchaia.org/">%anarchaia</A><BR>
<A href="http://project.ioni.st/">%projectionist</A><BR>
<A href="http://pugs.blogs.com/">~audreyt</A><BR>
<A href="http://dablog.rubypal.com/">~black</A><BR>
<A href="http://www.jamesbritt.com/">~britt</A><BR>
<A href="http://www.jamisbuck.org/jamis/">~buck</A><BR>
<A href="http://tomcopeland.blogs.com/juniordeveloper/">~copeland</A><BR>
<A href="http://eigenclass.org/">~fernandez</A><BR>
<A href="http://www.chadfowler.com/">~fowler</A><BR>
<A href="http://www.loudthinking.com/">~hansson</A><BR>
<A href="http://blog.segment7.net/">~hodel</A><BR>
<A href="http://slash7.com/">~hoy/7</A><BR>
<A href="http://fhwang.net/">~hwang</A><BR>
<A href="http://blog.leetsoft.com/">~luetke</A><BR>
<A href="http://www.worldlingo.com/wl/translate?wl_lp=JA-en&wl_glossary=gl1&wl_fl=3&wl_rurl=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_url=http%3A%2F%2Fwww.rubyist.net%2F%7Ematz%2F&wl_g_table=-3">~matz</A><BR>
<A href="http://moonbase.rydia.net/">~mental</A><BR>
<A href="http://techno-weenie.net/">~olson</A><BR>
<A href="http://pragprog.com/pragdave">~pragdave</A><BR>
<A href="http://www.livejournal.com/users/premshree/">~premshree</A><BR>
<A href="http://kronavita.de/chris/blog/">~neukirchen</A><BR>
<A href="http://www.robbyonrails.com/">~robby</A><BR>
<A href="http://www.rousette.org.uk/">~rousette</A><BR>
<A href="http://nubyonrails.com/">~topfunky</A><BR>
<A href="http://www.jvoorhis.com/">~voorhis</A><BR>
<A href="http://onestepback.org/">~weirich</A><BR>
<A href="http://blog.zenspider.com/">~zenspider</A><BR>
        </DIV> 
 <DIV class="sidebarBox">
        <H2 class="sidebarTitle">Syndicate</H2>
        <UL>
            <LI><A href="../index.xml">RSS 2.0</A></LI>
        </UL>
        </DIV> 
 <DIV class="sidebarBox">
        <P>Built upon <A href="http://hobix.com/">Hobix</A></P>
        </DIV> 
<IMG src="../images/redhanded-duck.gif" alt="Type the Duck">
<DIV class="email">Got a story for us? <A href="../mailto:redhanded@hobix.com">E-mail it!</A></DIV>
<DIV class="technorati"><P><A href="http://www.technorati.com/profile/whytheluckystiff">Technorati Profile</A>
<A href="http://www.technorati.com/cosmos/search.html?url=http%3A%2F%2Fredhanded.hobix.com"><BR>
<IMG src="../images/bubble_icon.gif" height="20" width="24" alt="Get Conversations about RedHanded &raquo; sneaking Ruby through the system"></A>
</P>
</DIV>

</DIV>


 <DIV id="blog">
        
<DIV class="entry">
    <H2 class="entryTitle">Counting At The Cloak 'N' Bind
  <SPAN class="entryPermalink"><A href="../inspect/countingAtTheCloakNBind.html" title="Permanent link to &ldquo;Counting At The Cloak &#39;N&#39; Bind&rdquo;">#</A></SPAN>
</H2>

<DIV class="entrySection">by <A href="http://whytheluckystiff.net/" title="Visit why&#39;s homepage">why</A> 
  in <A href="../inspect" title="List of entries in the &ldquo;inspect&rdquo; category">inspect</A>
</DIV>

     <DIV class="entryContent"><P>So Method#to_proc is basically totally bankrupt.  It is now the most severely mocked typecast in the book.
From RailsConf:</P>


<PRE> [10, 20, 30].map &amp;4.method(:+)

 ary.each &amp;(hsh={}).method(:store)

 def initialize(hsh)
   hsh.each &amp;method(:instance_variable_set)
 end
</PRE>

	<P>Clearly, fun stuff.  But, you know, bankrupt.</P>


	<P>If you don’t mind drawing a bit more blood, did you know you can use this
stuff to kill <CODE>(\w+)_with_index</CODE>?</P>


<PRE> %w[joe tim francis].map &amp;with_index { |x| [x, index] }
  #=&gt; [["joe", 0], ["tim", 1], ["francis", 2]]
</PRE>

	<P>Here’s how it works: the <CODE>index</CODE> accessor is added to the Proc.  And
each time we loop, the accessor is incremented.</P>


	<P>It takes some glue, though.  Proc#bind (from Rails, originally <A href="../inspect/aBlockCostume.html">cloaker</A>)
is used to turn the block into a method <EM>of itself!</EM>  Then <CODE>with_index</CODE> adds an incrementing wrapper over it.
The <CODE>Method#to_proc</CODE> happens when you amp it into <CODE>each</CODE>.</P>


<PRE> # from activesupport
 class Proc
   def bind(object)
     block, time = self, Time.now
     (class &lt;&lt; object; self end).class_eval do
       method_name = "__bind_#{time.to_i}_#{time.usec}" 
       define_method(method_name, &amp;block)
       method = instance_method(method_name)
       remove_method(method_name)
       method
     end.bind(object)
   end
 end

 # there are three interesting variables here:
 # blk:: the block you've passed in.
 # bound:: the same block, but now a method of itself.
 # wrap:: the wrapper proc which does the counting.
 def with_index(&amp;blk)
   class &lt;&lt; blk
     attr_reader :index
     def even; @index % 2 == 0 end
     def odd;  @index % 2 == 1 end
   end

   i = 0
   bound = blk.bind(blk)
   wrap = proc do |*a|
     blk.instance_variable_set('@index', i)
     x = bound[*a]
     i += 1
     x
   end
   wrap
 end
</PRE>

	<P>Now, for some exercises:</P>


<PRE> &gt;&gt; %w[joe tim francis].map &amp;with_index { |x| [x, index] }
 =&gt; [["joe", 0], ["tim", 1], ["francis", 2]]

 &gt;&gt; %w[badger goat mule eagle shark].select &amp;with_index { even }
 =&gt; ["badger", "mule", "shark"]
</PRE>

	<P>However, 1.9’s <A href="http://ruby-doc.org/core-1.9/classes/Enumerable/Enumerator.src/M003574.html">Enumerator#with_index</A>
is definitely less boggling and sloppy.  If you have instance variables inside the block, they’ll be lookin in the
block object for a home.</P></DIV> 
</DIV>
<DIV class="entryFooter"> 
    <NOBR>27 Jun 2006</NOBR> at <NOBR>19:48</NOBR>
    <NOSCRIPT></NOSCRIPT>
   | 
    24 comments
</DIV>
</DIV>
<DIV id="comments">


<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Daniel Berger</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jun 2006</NOBR> at <NOBR>22:42</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>If all we want is to pass arguments to Array#map (and that’s what every to_proc example I’ve seen has done), let’s just modify Array#map instead of introducing new and ugly code constructs that make me not want to program in Ruby any more:</P>


<PRE>class Array
   def map(*args)
      array = []
      hash = {}
      current = nil
      args.each{ |arg|
         if arg.is_a?(Symbol)
            hash[arg] = []
            current = arg
         else
            hash[current] &lt;&lt; arg
         end
      }

      self.each{ |e|
         hash.each{ |m, params|
            unless params.empty?
               e = e.send(m, *params)
            else
               e = e.send(m)
            end
         }
         yield e if block_given?
         array &lt;&lt; e
      }

      array
   end
end
</PRE>

	<P>The above code assumes that non-symbol arguments are meant as parameters to the most immediately previous symbol.</P>


	<P>Downcase, then reverse each string:</P>


<PRE>array = %w/FOO BAR BAZ/
array.map(:downcase, :reverse) # ['oof', 'rab', 'zab']
</PRE>

	<P>Add 4, then double, each element of the array:</P>


<PRE>array = [10, 20, 30]
array.map(:+, 4, :*, 2) # [28, 48, 68]
</PRE>

	<P>Yes, I’m sure my map implementation could stand some major refactoring.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Danno</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>27 Jun 2006</NOBR> at <NOBR>23:30</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Couldn’t currying handle most of this?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jes5199</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>01:38</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>makes me start thinking about ‘generator’. is generator in 1.9 still using continuations and being too slow to have fun with?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jes5199</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>01:57</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent">also, i start wondering why in 1.8.4 this doesn’t do anything useful:
<CODE>.enum_for(:map!).each_with_index{</CODE>
not only does the each_with_index return a Enumerator object instead of the output of map, it fails to filter the results of its block back into map. so sad.</DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>02:06</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>Daniel Berger:</STRONG> I can’t seem to figure out why you read this blog.</P>


	<P><STRONG>Danno:</STRONG> Not really.  Look back at how <CODE>index</CODE> and <CODE>even</CODE> are used in the last examples.</P>


	<P><STRONG>jes5199:</STRONG> Maybe swap like: <CODE>.enum_for(:each_with_index).map</CODE> ...I dunno.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>riffraff</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>02:21</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>jes5199</STRONG>: there is still a lot of road to walk to get serious generators support in ruby, but  IIRC  at the moment it does not use <CODE>callcc</CODE> anymore, relying instead on a thread-based implementation.</P>


	<P>Which recalls me we should convince ko1 to provide M:N threading, otherwise doing this tricks with OS threads may be sad.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>trans</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>02:32</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Is to_proc still alive!? Another…</P>


	<P>class Hash
  def to_proc
    Proc.new { |o| 
      each { |k,v| o.<I>send</I>( ”#{k}=”, v ) } 
    }
  end
end</P>


	<OL>
	<LI>rap</LI>
	</OL>


	<P>class X
  attr_accessor :a
  def initialize( &amp;h )
    h[self]
  end
end</P>


	<P>X.new(&amp;{:a=&gt;1})</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>trans</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>02:35</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Is to_proc still alive!? Another…</P>


<PRE>  class Hash
    def to_proc
      Proc.new { |o|
        each { |k,v| o.send( ”#{k}=”, v ) }
      }
    end
  end

  class X 
    attr_accessor :a 
    def initialize( &amp;h )
      h[self]
    end
  end

  X.new(&amp;{:a=&gt;1})
</PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Confused</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>09:10</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I didn’t understand a single line. Where can I enlighten me?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>09:39</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I’m not really a fan of M:N threading to be honest.  And besides, OS threads are already M:N on many platforms.</P>


	<P>I think we’re better off combining threads with explicit support for first-class coroutines (i.e. not thread- or continuation- based), like  GNU  pth threads or Win32 fibers.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>10:03</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>I don’t know … the Kernel.with_index thing has something going for it, although as far as the specifics go I’m starting to think I’d prefer something like this:</P>


<PRE><CODE>
class Integer
  def even? ; ( self &amp; 1 ).zero? ; end
  def odd? ; ( self &amp; 1 ).nonzero? ; end
end

def with_index( &amp;block )
  index = -1
  Proc.new { |*a| block[ a, index += 1 ] }
end</CODE></PRE>

	<P>But, here’s another thing:  why don’t we have <CODE>Integer#even?</CODE> and <CODE>Integer#odd?</CODE> anyhow?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>10:06</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>(I realize that misses the point of exercising <CODE>Method#to_proc</CODE> though)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>why</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>10:12</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>Confused:</STRONG> You poor guy, I’m sorry.  I really do regret posting this one.</P>


	<P>I wouldn’t try to understand the insides of the <CODE>Proc#bind</CODE> method.  It’s a completely complicated hack.  If you happen to know the Prototype JavaScript library, it works just like the <CODE>bind</CODE> method in Prototype.</P>


	<P>Basically, when you <CODE>bind</CODE> a proc to an object, whenever that proc gets called, it’ll act like a method (with instance variables and <CODE>self</CODE> and all that.)</P>


<PRE> add = proc { |x| self + x }
 add = add.bind("=&gt; ")
 ['pizzicato five', 'deerhoof'].map &amp;add
</PRE>

	<P>The <CODE>with_index</CODE> binds the Proc to give it <CODE>index</CODE>, <CODE>even</CODE> and <CODE>odd</CODE> methods.</P>


	<P><STRONG>trans:</STRONG> Oh, man, you’re givin me carnal thoughts here…</P>


<PRE> class Hash
   def to_proc
     proc { |a|
       self.inject(nil) { |_,(k,v)|
         eval("proc { |#{k}| #{v} }")[*a]
       }
     }
   end
 end

 [[2,4],[4,5],[12,1]].map &amp;{ %|x,y| =&gt; %{x + y} }
</PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>10:18</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Okay, here’s one for the party.</P>


<PRE><CODE>
class Object
  def to_proc
    method( :&lt;&lt; ).to_proc
  end
end

items = %w( many good steaks )

array = []
items.each &amp;array
p array

string = "" 
items.each &amp;string
p string

items.each &amp;$stdout
puts
</CODE></PRE></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>10:22</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>why</STRONG>: Okay, that’s just <EM>bent</EM>.  Wow.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Daniel Berger</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>12:46</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><B>why:</B> I read your blog because I find it interesting, as well as many of the responses.</P>


	<P>I’m just trying to figure out why people are getting so excited about this convoluted syntax when it seems to me that they’ve never bothered to ask themselves what problem it is that they’re solving.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jes5199</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>12:52</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><B>why:</B> what happens when your hash has more than one pair?</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>13:54</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>jes5199</STRONG>: it ignores all but one of them—whichever one happens to come last in the iteration.  Note how the injection state argument is ignored.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>13:58</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>Dan</STRONG>: We’re playing, basically.  Exploring.  This stuff’s fun!  It doesn’t have to solve anything.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>MenTaLguY</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>14:01</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Uh, both of those questions were directed to why, weren’t they?  Geez, sorry.  I don’t know what’s with me this week.</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>ix</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>16:44</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>berger: i dont understand this post either. but its giving me perl flashbacks ;)</P>


	<P>and it seems the commentbox thinks perl is a typo..coincidence? :D</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>Asztal^_^</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>18:02</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P><STRONG>stop the madness!</STRONG></P>


	<P>My head hurts enough from template metaprogramming. :)</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>jes5199</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>28 Jun 2006</NOBR> at <NOBR>19:16</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>oh! i was making a mistake: why’s code explodes if you use <CODE>%|a|</CODE> in your own block,  as he is already using <CODE>|a|</CODE> in his metablock</P></DIV></DIV>
</DIV>

<DIV class="entry">
    <DIV class="entryAttrib">
        <DIV class="entryAuthor"><H3>psmith</H3></DIV>
        <DIV class="entryTime">said on 
    <NOBR>30 Jun 2006</NOBR> at <NOBR>14:03</NOBR>
    <NOSCRIPT></NOSCRIPT>
  </DIV>
    </DIV>
    <DIV class="entryContentOuter"><DIV class="entryContent"><P>Anything you can do, we can do meta.</P></DIV></DIV>
</DIV>


<DIV class="entry">
<FORM name="userComment" method="post" action="/api/comment/inspect/countingAtTheCloakNBind">
  <DIV class="entryAttrib">
     <DIV class="entryAuthor"><INPUT name="sayor" type="textbox" size="15" maxlength="50"></DIV>
     <DIV id="liveTime" class="entryTime"><NOBR>12 Jul 2010</NOBR> at <NOBR>22:16</NOBR></DIV>
  </DIV>
  <DIV class="entryContentOuter"><DIV class="entryContent">
     <INPUT type="hidden" name="timestamp" value="yopYLare1A">
     <TEXTAREA name="consay" rows="6" cols="50"></TEXTAREA>
     <P><INPUT type="button" name="pleasePreview" value="preview" onclick="liveTextilePreview(document.forms[&#39;userComment&#39;].elements[&#39;consay&#39;], &#39;textilePreview&#39;, &#39;/api/preview&#39;)">
        <INPUT type="submit" name="submit" value="&gt;&gt;">
        <SMALL>* do <A href="../javascript:quickRedReference();">fancy stuff</A> in your comment.</SMALL>
     </P>
     <DIV id="textileWrap"><H4>PREVIEW PANE</H4>
     <DIV id="textilePreview"></DIV>
     </DIV>
     </DIV>
  </DIV></FORM></DIV>
  



        </DIV> 

</DIV>



</DIV>





</BODY></HTML>